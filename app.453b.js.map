{"version":3,"sources":["webpack://roadmap/webpack/runtime/chunk loaded","webpack://roadmap/./src/assets/SvgIcon.tsx","webpack://roadmap/./src/constants/colors.ts","webpack://roadmap/./src/styles/Header.ts","webpack://roadmap/./src/components/Header/Title.tsx","webpack://roadmap/./src/utils/analytics.ts","webpack://roadmap/./src/data/user.ts","webpack://roadmap/./src/data/auth.ts","webpack://roadmap/./src/styles/Keyframes.ts","webpack://roadmap/./src/styles/Common/Spinner.ts","webpack://roadmap/./src/components/Header/ConnectionStatus.tsx","webpack://roadmap/./src/data/connection.ts","webpack://roadmap/./src/styles/Common/Dropdown.ts","webpack://roadmap/./src/components/Header/Dropdown.tsx","webpack://roadmap/./src/components/Header/Avatar.tsx","webpack://roadmap/./src/components/Header/Header.tsx","webpack://roadmap/./src/constants/index.ts","webpack://roadmap/./src/utils/nanoid.ts","webpack://roadmap/./src/state/actions/selection.ts","webpack://roadmap/./src/utils/ui.ts","webpack://roadmap/./src/utils/dates.ts","webpack://roadmap/./src/utils/subscribtion.ts","webpack://roadmap/./src/utils/placeholderActions.ts","webpack://roadmap/./src/utils/cardActions.ts","webpack://roadmap/./src/state/actions/cards.ts","webpack://roadmap/./src/types/state.ts","webpack://roadmap/./src/styles/Placeholder.ts","webpack://roadmap/./src/components/Placeholder/Placeholder.tsx","webpack://roadmap/./src/components/Deck/Day.tsx","webpack://roadmap/./src/components/Deck/Month.tsx","webpack://roadmap/./src/styles/DateTable.ts","webpack://roadmap/./src/components/Deck/MonthsList.tsx","webpack://roadmap/./src/styles/CardBlock.ts","webpack://roadmap/./src/assets/CardStatus.tsx","webpack://roadmap/./src/components/Deck/Card.tsx","webpack://roadmap/./src/components/Deck/CardsDeck.tsx","webpack://roadmap/./src/components/Deck/DeckLines.tsx","webpack://roadmap/./src/state/actions/ui.ts","webpack://roadmap/./src/components/Deck/Deck.tsx","webpack://roadmap/./src/components/Roadmap/Roadmap.tsx","webpack://roadmap/./src/styles/EditScreen.ts","webpack://roadmap/./src/styles/Form/Button.ts","webpack://roadmap/./src/components/EditScreen/Range.tsx","webpack://roadmap/./src/styles/Form/Switch.ts","webpack://roadmap/./src/components/EditScreen/Switch.tsx","webpack://roadmap/./src/components/EditScreen/DateInput.tsx","webpack://roadmap/./src/styles/Editor.ts","webpack://roadmap/./src/state/actions/longs.ts","webpack://roadmap/./src/utils/editor.ts","webpack://roadmap/./src/components/EditScreen/Editor.tsx","webpack://roadmap/./src/components/EditScreen/EditFields.tsx","webpack://roadmap/./src/components/EditScreen/EditTitle.tsx","webpack://roadmap/./src/components/EditScreen/EditScreen.tsx","webpack://roadmap/./src/state/actions/user.ts","webpack://roadmap/./src/components/Screens/Roadmap.tsx","webpack://roadmap/./src/styles/Landing.ts","webpack://roadmap/./src/assets/RebelPlans.tsx","webpack://roadmap/./src/components/Overview/Landing.tsx","webpack://roadmap/./src/styles/Overview.ts","webpack://roadmap/./src/components/Overview/Overview.tsx","webpack://roadmap/./src/components/Overview/SingleLineInput.tsx","webpack://roadmap/./src/components/Screens/Overview.tsx","webpack://roadmap/./src/components/Core/Routes.tsx","webpack://roadmap/./src/components/Core/Core.tsx","webpack://roadmap/./src/styles/Main.ts","webpack://roadmap/./src/data/index.ts","webpack://roadmap/./src/state/initialState.ts","webpack://roadmap/./src/state/reducers/ui.ts","webpack://roadmap/./src/state/reducers/index.ts","webpack://roadmap/./src/state/reducers/cards.ts","webpack://roadmap/./src/state/reducers/longs.ts","webpack://roadmap/./src/state/reducers/milestones.ts","webpack://roadmap/./src/state/reducers/selection.ts","webpack://roadmap/./src/state/reducers/metas.ts","webpack://roadmap/./src/state/reducers/user.ts","webpack://roadmap/./src/data/data.ts","webpack://roadmap/./src/data/newUser.ts","webpack://roadmap/./src/state/sagas/auth.ts","webpack://roadmap/./src/state/sagas/card.ts","webpack://roadmap/./src/state/sagas/text.ts","webpack://roadmap/./src/utils/arrays.ts","webpack://roadmap/./src/state/sagas/roadmap.ts","webpack://roadmap/./src/utils/recurrent.ts","webpack://roadmap/./src/state/sagas/user.ts","webpack://roadmap/./src/state/sagas/analytics.ts","webpack://roadmap/./src/state/sagas/index.ts","webpack://roadmap/./src/styles/Global.ts","webpack://roadmap/./src/index.tsx","webpack://roadmap/./src/state/store.ts","webpack://roadmap/webpack/bootstrap","webpack://roadmap/webpack/runtime/compat get default export","webpack://roadmap/webpack/runtime/define property getters","webpack://roadmap/webpack/runtime/global","webpack://roadmap/webpack/runtime/harmony module decorator","webpack://roadmap/webpack/runtime/hasOwnProperty shorthand","webpack://roadmap/webpack/runtime/make namespace object","webpack://roadmap/webpack/runtime/jsonp chunk loading","webpack://roadmap/webpack/startup"],"names":["deferred","SvgIcon","props","viewBox","children","weekendColor","logo","pink","green","yellow","blue","header","dark","demi","grey","lite","light","border","background","statusColorMap","pending","progress","delayed","complete","dropped","accent","danger","stable","active","text","onDark","bold","main","mute","onLight","statusColors","purple","violet","indigo","azur","orange","fire","HeaderBlock","Logo","RoadmapTitle","AvatarBlock","RoadmapList","title","currentRoadmapID","state","ui","metas","roadmapName","useMemo","name","useEffect","document","savedAnalyticsState","writeUserLastActive","userID","ref","update","lastActive","Date","now","analytics","analyticsState","handleAuth","e","shouldCall","callAndCancel","provider","useDeviceLanguage","signInWithRedirect","login","setTimeout","logEvent","targetText","target","HTMLButtonElement","innerText","scrollTop","querySelector","event_callback","shake","rotate","move","SpinnerMixin","size","Math","ceil","Spinner","ConnectionStatus","user","useState","isConnected","setConnected","callback","connectionChannel","status","listener","on","snapshot","val","off","close","id","className","Cancel","DropdownGroup","colors","DropdownWraper","Dropdown","onClick","alert","signOut","Avatar","UserPhoto","photoURL","src","alt","fetchig","Header","to","Title","ID","LENGTH","SYMBOLS","DAY","WIDTH","HEADER","HEIGHT","MILE_HEIGHT","CARD","VERTICAL_SPACE","HORIZONTAL_SPACE","RESIZE_TOLERANCE","CARDDECK_MOUSE_POSITION_FIX","MILE","MARGIN","LOCALE","navigator","language","COLUMN_MULTIPLIER","PLAN","FREE","LIMIT","ROADMAPS","TIME","DAYS_IN_MONTH","AUTOSAVE_MS","LAST_ACTIVE","MILLISECONDS_IN_DAY","nanoid","selectionDelete","type","payload","getExtraMonths","window","innerWidth","getPlaceholderWidth","x1","x2","max","round","getCardStatus","from","until","today","undefined","localeCompare","fromToToday","getDaysDiff","getDaysInterval","autoscaleTextarea","textarea","setFocus","style","height","scrollHeight","Number","isInteger","selectionStart","value","length","selectionEnd","scrollToToday","list","smooth","scroll","left","offsetLeft","parentElement","behavior","callItBack","months","getTwoDigitDate","number","slice","getYMDFromTimestamp","timestamp","date","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","getYMDWFromTimestamp","firstDay","setUTCHours","setUTCDate","firstWeekDay","getUTCDay","getTodayTimestamp","UTC","getFullYear","getMonth","getDate","getDataString","toISOString","date1","date2","getTime","getDateFromDiff","diff","getExpandedDate","offsetMonths","isFuture","getNewDates","dates","direction","dateDiff","map","getMonthList","swap","split","fromYear","fromMonth","untilYear","untilMonth","yearMonth1","yearMonth2","min","extraMonth","skipOneMonthForFuture","yearsDiff","monthsDiff","Array","fill","_","index","getExtendedMonthList","i","offset","newMonths","prototype","apply","getFromUntil","cards","Object","values","reduce","card","getUIOffset","todayString","extraMonths","fromOffset","untilOffset","placeholderInitState","started","y1","line","done","placeholder","notify","fn","x","parseInt","m","d","setMonths","passID","set","newID","get","removePlaceholder","relatedTarget","getAttribute","mXFix","mYFix","getCoords","coord","el","nativeEvent","button","offsetTop","cardDeck","getMousePositionFromCardDeck","mX","mY","offsetX","offsetY","ElementType","PlaceholderBlock","solid","PlaceholderContent","Placeholder","aim","setAim","memoizedCards","isAimHoversCard","shortList","filter","some","Boolean","isAimOnCard","selectionType","selection","none","dispatch","isNew","newCard","shouldSkipAim","opacity","transform","width","String","getPlaceholderData","weekDay","tip","isToday","Month","monthName","toLocaleDateString","getMonthName","days","dateObject","weekday","getDateForTooltip","key","DeckBlock","DeckInner","MonthsBlock","fDay","dayWidth","daysWidth","relativePart","Today","TodayScroll","scrollPosition","todayRef","todayTimestamp","cardsPosition","cardsYear","cardsMonth","todayStyle","MonthBlock","monthStyle","CardWaraper","DeckLineCounter","CardBlockText","CardStatusSVG","xmlns","CardBlockProgress","CardBlock","cardCases","CardStatus","RoadmapCard","typeS","progS","color1","color2","getProgressBackgroud","handleMouseDown","classList","contains","altKey","ctrlKey","metaKey","shiftKey","onContextMenu","preventDefault","stopPropagation","onDoubleClick","onMouseEnter","onTouchStart","onMouseDown","CardsDeck","setLines","cardsObject","lineSize","useRef","current","dayOffset","dayDiff","top","Card","wrapperStyle","maxSize","DeckLines","lineCount","setUIOffset","setTodayTimestamp","Deck","listRef","ready","position","setScrollPosition","hasMonths","lastOffset","updateMonths","useLayoutEffect","scrollLeft","moveCard","cardDetails","resize","limit","pressX","extraSize","dateTable","removeDateTable","remove","clearDesk","immidiate","wasResized","cursor","pointerEvents","zIndex","pressInZone","currentTarget","add","clientWidth","clientX","HTMLDivElement","moveInZone","y","clientY","diffX","extra","extraX","curTarget","rect","getBoundingClientRect","childRect","floor","item","HTMLElement","offsetWidth","trunc","movePlaceholder","releaseInZone","Error","lineDiff","enterZone","leaveZone","HTMLHtmlElement","HTMLSpanElement","tagName","toLowerCase","renderPastOrFuture","firstMonth","newDate","extraLeftOffset","d1","d2","setDate","lastMonth","Months","tabIndex","blur","onScroll","deck","scrollCurrent","todayElement","todayLeft","showScrollButton","daysVisible","daysTotal","scrollWidth","onMouseOut","onMouseLeave","onMouseMove","onMouseUp","Roadmap","cancelAction","toLocaleLowerCase","addEventListener","removeEventListener","EditForm","EditExtra","Fieldset","FormLabel","LabelWarp","attrs","as","join","FormInput","FormInputWrap","RangeInput","EditExtraFields","EditExtraActions","EditEntry","rows","hoverColor","action","Button","Range","disabled","change","save","setVal","handleChange","newVal","isNaN","htmlFor","onChange","onKeyDown","SwitchBlock","Switch","toggle","defaultChecked","DateInput","inputRef","HTMLInputElement","focus","select","required","pattern","EditorWrap","debouncedSave","func","styleMap","STRIKETHROUGH","textDecoration","HIGHLIGHT","backgroundColor","LongEditor","cardID","rawState","longs","EditorState","initialRaw","convertFromRaw","JSON","parse","editorState","setEditorState","dispatchEdit","long","handleTab","changeState","RichUtils","getCurrentContent","context","getPlainText","trim","newRawState","stringify","raw","convertToRaw","blocks","block","newBlock","assign","depth","inlineStyleRanges","entityRanges","data","keys","convertToJSON","saveLong","cancel","Editor","onBlur","flush","onTab","handleKeyCommand","command","toUpperCase","reverse","keyBindingFn","KeyBindingUtil","code","getDefaultKeyBinding","customStyleMap","EditFields","setSelection","cardDispatch","isProgressOn","isFinite","setFrom","setUntil","Save","EditTitle","enforceExtraFields","autoFocus","DefaultState","EditScreen","selectedElement","isExtraFieldsEnforced","newSelection","setNewSelection","isInvalid","setInvalid","isCardValid","edited","original","editedKeys","originalKeys","hasCardChanged","delete","hasExtraFields","setAccountRoadmaps","roadmaps","meta","roadmapDataFetch","roadmapData","RoadmapScreen","history","location","routeID","params","roadmapsSet","userRoadmapIDs","includes","setCurrentRoadmap","push","pathname","LandingIntro","LandingRuller","LandingTitle","LandingButton","LandingList","RebelPlans","SignedOff","MoneyOff","CreditCard","TrendingUp","RoadmapListTitle","RoadmapListBubble","RoadmapListItem","RoadmapListItemDetail","RoadmapListAdd","Overview","showInput","userRoadmapsSet","userRoadmaps","Landing","roadmapsIDs","sort","a","b","createdAt","toLocaleString","getLocalString","SingleLineInput","isShowingInput","setRoadmapName","OverviewScreen","addAccountRoadmap","Routes","path","timeout","MainBlock","Core","manageTimer","hidden","clearTimeout","newTimestamp","getMilisecondsUntilTomorrow","email","milestones","initialState","nextState","forEach","milestone","roadmapID","getRoadmapContent","emiter","fetchAccountDetails","once","fetchRoadmapMeta","updateRemoteCardData","content","updateRemoteLong","addRemoteAccountRoadmap","time","createAccount","fetchUserRoadmapsData","watchAuth","roadmapIDs","f","watchCardChange","watchTextChange","hydrateWithIDs","obj","string","fetchCurrentRoadmapData","watchCurrentRoadmapChange","watchAddRoadmap","channel","isCancelled","hydratedData","equalCards","equalLongs","equalMiles","setRecurrentEvent","eventActive","recurrentEvent","sendLastActive","stopSending","actionLogin","sendAnalytics","method","uuid","app_version","rootSaga","GlobalStyle","saveAnalyticsState","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","fetching","success","out","sagaMiddleware","middleware","composedMiddleware","trace","traceLimit","store","run","userData","authSuccess","onAuthStateChanged","uid","displayName","rootAppNode","body","firstElementChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","this","Function","hmd","create","prop","hasOwnProperty","r","Symbol","toStringTag","installedChunks","143","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"app.xxxx.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","import React from 'react';\n\nconst SvgIcon = (props: { children?: JSX.Element; className?: string }): JSX.Element => {\n  return (\n    <svg viewBox=\"0 0 24 24\" {...props}>\n      {props?.children}\n    </svg>\n  );\n};\n\nexport default React.memo(SvgIcon);\n","import { CardTypes } from 'types/card';\nimport { MileColors } from 'types/state';\n\nexport const weekendColor = 'rgba(106,148,184,0.06)';\n\nexport const logo = {\n  pink: '#ec4af4',\n  green: '#84ff00',\n  yellow: '#edff00',\n  blue: '#4ba4f5',\n};\n\nexport const header = {\n  dark: '#191919',\n  demi: '#333333',\n  grey: '#696969',\n  lite: '#f7f8f9',\n  light: {\n    border: '#ccc',\n    background: '#eee',\n  },\n};\n\nexport const accent = {\n  danger: '#ff3e84',\n  stable: logo.green,\n  active: logo.blue,\n};\n\nexport const text = {\n  onDark: {\n    bold: '#fff',\n    main: '#ccc',\n    mute: '#aaa',\n    demi: header.grey,\n  },\n  onLight: {\n    bold: '#333',\n    main: header.grey,\n    mute: '#ccc',\n  },\n};\n\nexport const statusColorMap = {\n  pending: '#cccccc',\n  progress: '#60aeff',\n  delayed: '#ff9360',\n  complete: '#0bad00',\n  dropped: '#ff5656',\n};\n\nexport const mainColors: { [key in MileColors]: string } = {\n  purple: '#8c0756',\n  violet: '#8933f4',\n  indigo: '#374193',\n  blue: '#1c93ff',\n  azur: '#01e3b3',\n  green: '#0b890c',\n  yellow: '#e7e400',\n  orange: '#ffa900',\n  fire: '#ff5700',\n  pink: '#ff55b8',\n};\n\n// export const W3CSS = {\n//   red: '#f44336',\n//   pink: '#e91e63',\n//   purple: '#9c27b0',\n//   deeppurple: '#673ab7',\n//   indigo: '#3f51b5',\n//   blue: '#2196F3',\n//   green: '#4CAF50',\n//   amber: '#ffc107',\n//   orange: '#ff9800',\n//   bluegray: '#607d8b',\n// };\n\nconst statusColors: { [key in CardTypes]: string } = {\n  pending: '#cccccc',\n  progress: '#60aeff',\n  delayed: '#ff9360',\n  complete: '#0bad00',\n  dropped: '#ff5656',\n};\n\nexport default {\n  logo,\n  header,\n  accent,\n  text,\n  statusColors: statusColors,\n  ...mainColors,\n};\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nimport color from 'constants/colors';\n\nexport const HeaderBlock = styled.header`\n  display: flex;\n  min-height: 45px;\n  background: ${color.header.dark};\n  color: ${color.text.onDark.main};\n  padding: 0 12px 0 0;\n  font-size: 1.2rem;\n  line-height: 1rem;\n  justify-content: left;\n  align-items: center;\n  user-select: none;\n  & > * {\n    margin-left: 12px;\n  }\n`;\n\nexport const Logo = styled(Link)`\n  display: flex;\n  width: 28px;\n  height: 27px;\n  min-width: 28px;\n  border: 1px solid ${color.header.grey};\n  border-radius: 4px;\n  position: relative;\n  sup,\n  sub {\n    display: inline-block;\n    position: absolute;\n    left: 5px;\n    height: 3px;\n    font-size: 0;\n    transition: width 0.2s;\n  }\n  sup {\n    top: 5px;\n    width: 18px;\n    border-top: 2px solid ${color.logo.pink};\n    border-bottom: 2px solid ${color.logo.green};\n  }\n  sub {\n    top: 15px;\n    width: 10px;\n    border-top: 2px solid ${color.logo.yellow};\n    border-bottom: 2px solid ${color.logo.blue};\n  }\n  &:hover sub {\n    width: 18px;\n  }\n`;\n\nexport const RoadmapTitle = styled.h1`\n  margin-top: 1px;\n  margin-bottom: 0;\n  font-size: 13px;\n  font-weight: normal;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  text-align: center;\n  user-select: all;\n`;\n\nexport const AvatarBlock = styled.button`\n  padding: 0;\n  width: 29px;\n  overflow: hidden;\n  box-sizing: border-box;\n  height: 29px;\n  min-width: 29px;\n  border-radius: 4px;\n  font-size: 13px;\n  color: ${color.text.onDark.mute};\n  transition: 0.2s;\n  position: relative;\n  z-index: 30;\n  cursor: pointer;\n  border: 1px solid ${color.header.grey};\n  background: transparent;\n  /* &.fade-left {\n    transform: translateX(-41px);\n    opacity: 0;\n    pointer-events: none;\n  }\n  &.fade-right {\n    transform: translateX(41px);\n    opacity: 0;\n    pointer-events: none;\n  } */\n  &:hover {\n    color: ${color.logo.green};\n    img {\n      transform: scale(1.2);\n    }\n  }\n  & img {\n    width: 100%;\n    height: 100%;\n    font-size: 0;\n    transition: 0.2s;\n    vertical-align: middle;\n  }\n  & svg:only-child {\n    width: 21px;\n    margin: 3px 0 0;\n  }\n  & svg {\n    fill: currentColor;\n    pointer-events: none;\n    &.online,\n    &.offline {\n      color: transparent;\n      position: absolute;\n      border-radius: 50%;\n      width: 10px;\n      right: 0;\n      bottom: 0;\n      z-index: 1;\n    }\n    &.online {\n      color: ${color.accent.stable};\n      background: ${color.text.onDark.demi};\n    }\n    &.offline {\n      color: ${color.accent.danger};\n      background: ${color.text.onDark.bold};\n    }\n  }\n`;\n","import React, { useMemo, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { RoadmapTitle } from 'styles/Header';\n\nimport { State } from 'types/state';\n\nconst RoadmapList = ({ title }: { title: string }): JSX.Element | null => {\n  const currentRoadmapID = useSelector((state: State) => state.ui.currentRoadmapID);\n  const metas = useSelector((state: State) => state.metas);\n  const roadmapName = useMemo(() => (metas[currentRoadmapID] || { name: title }).name, [metas, currentRoadmapID]);\n  useEffect(() => {\n    if (document.title !== roadmapName) {\n      document.title = roadmapName === title ? title : `${roadmapName}  ${title}`;\n    }\n  }, [roadmapName]);\n\n  return <RoadmapTitle>{roadmapName}</RoadmapTitle>;\n};\n\nexport default React.memo(RoadmapList);\n","import firebase from 'firebase/app';\n\nexport const analytics = (() => {\n  let savedAnalyticsState: firebase.analytics.Analytics | undefined;\n  return {\n    saveAnalyticsState: (analyticsState: firebase.analytics.Analytics) => {\n      savedAnalyticsState = analyticsState;\n    },\n    act: () => savedAnalyticsState,\n  };\n})();\n","import firebase from 'firebase/app';\n\nexport const writeUserLastActive = (userID: string): void =>\n  void firebase.database().ref(`users/${userID}`).update({\n    lastActive: Date.now(),\n  });\n","import firebase from 'firebase/app';\nimport { SyntheticEvent } from 'react';\n\nimport { AuthFetch, AuthSuccess, AuthOut } from 'types/actions';\nimport { writeUserLastActive } from 'data/user';\nimport { analytics } from 'utils/analytics';\n\nconst login = () => {\n  if (typeof firebase.auth === 'function') {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().useDeviceLanguage();\n    void firebase.auth().signInWithRedirect(provider);\n  }\n};\n\nexport const handleAuth = (e: SyntheticEvent): void => {\n  let shouldCall = true;\n  const callAndCancel = () => {\n    if (shouldCall) {\n      login();\n      shouldCall = false;\n    }\n  };\n  setTimeout(callAndCancel, 300);\n  analytics.act()?.logEvent('pre-login', {\n    targetText: e.target instanceof HTMLButtonElement ? e.target.innerText || e.target.title + ' (title)' : '',\n    scrollTop: document.querySelector('main')?.scrollTop || null,\n    event_callback: callAndCancel,\n  });\n};\n\nexport const handleAuthOut = (userID: string): void => {\n  writeUserLastActive(userID);\n  if (typeof firebase.auth === 'function') {\n    void firebase.auth().signOut();\n  }\n};\n\nexport const trackAuthChange = ({\n  fetching,\n  success,\n  out,\n}: {\n  fetching: () => AuthFetch;\n  success: (userData: AuthSuccess['payload']) => AuthSuccess;\n  out: () => AuthOut;\n}): void => {\n  fetching();\n  firebase.auth().onAuthStateChanged((user) => {\n    if (user && user.email) {\n      success({\n        id: user.uid,\n        name: user.displayName || '',\n        email: user.email,\n        photoURL: user.photoURL || '',\n      });\n    } else {\n      out();\n    }\n  });\n};\n","import { keyframes } from 'styled-components';\n\nexport const shake = keyframes`\n  8%, 41% {\n    transform: translateX(-10px);\n  }\n  25%, 58% {\n    transform: translateX(10px);\n  }\n  75% {\n    transform: translateX(-5px);\n  }\n  92% {\n    transform: translateX(5px);\n  }\n  0%, 100% {\n    transform: translateX(0);\n  }\n`;\n\nexport const rotate = keyframes`\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nexport const move = keyframes`\n  from { transform: translateX(-52%) }\n  to { transform: translateX(150%) }\n`;\n","import styled, { css } from 'styled-components';\n\nimport color from 'constants/colors';\nimport { rotate } from 'styles/Keyframes';\n\nexport const SpinnerMixin = css`\n  width: ${({ size = 50 }: { size?: number }) => `${size}px`};\n  height: ${({ size = 50 }: { size?: number }) => (size ? `${size}px` : '50px')};\n  margin: auto;\n  border: ${({ size = 50 }: { size?: number }) => `${Math.ceil(size / 10)}px solid transparent`};\n  border-top-color: ${({ size }: { size?: number }) => (size ? color.logo.green : color.text.onDark.main)};\n  border-radius: 50%;\n  animation: ${rotate} 1s linear infinite;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nexport const Spinner = styled.div`\n  ${SpinnerMixin}\n`;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport Check from '@material-ui/icons/CheckCircle';\nimport Cancel from '@material-ui/icons/Cancel';\n\nimport { State } from 'types/state';\nimport { getDataConnectionStatus } from 'data/connection';\n\nconst ConnectionStatus = (): JSX.Element | null => {\n  const user = useSelector((state: State) => state.user);\n  const [isConnected, setConnected] = useState(false);\n  useEffect(() => {\n    const notify = (status: boolean) => setConnected(status);\n    const connectionChannel = getDataConnectionStatus(notify);\n    return () => {\n      connectionChannel.close();\n    };\n  }, []);\n\n  return user.id ? isConnected ? <Check className=\"online\" /> : <Cancel className=\"offline\" /> : null;\n};\n\nexport default React.memo(ConnectionStatus);\n","import firebase from 'firebase/app';\nimport { eventChannel, EventChannel } from 'redux-saga';\n\nexport const getDataConnectionStatus = (callback: (status: boolean) => void): EventChannel<boolean> =>\n  eventChannel(() => {\n    const listener = firebase.database().ref('.info/connected');\n    listener.on('value', (snapshot) => {\n      callback(snapshot.val());\n    });\n    return () => {\n      listener.off();\n    };\n  });\n","import colors from 'constants/colors';\nimport styled from 'styled-components';\n\nexport const DropdownGroup = styled.ul`\n  position: absolute;\n  min-width: 150px;\n  max-width: 300px;\n  background: ${colors.header.lite};\n  font-size: 13px;\n  border-radius: 4px;\n  right: 12px;\n  box-shadow: 0 3px 8px -4px ${colors.header.demi};\n  border: 1px solid ${colors.header.light.border};\n  color: ${colors.text.onLight.main};\n  margin: 4px 0 0;\n  padding: 0;\n  opacity: 0;\n  transition: 0.2s;\n  transform: translateY(-20px);\n  pointer-events: none;\n  z-index: 20;\n  &:before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border: 5px solid transparent;\n    margin: -5px;\n    z-index: -1;\n  }\n  li {\n    list-style: none;\n    padding: 7px 10px;\n    cursor: pointer;\n    & + li {\n      border-top: 1px solid ${colors.header.light.border};\n    }\n    &:first-child {\n      border-radius: 4px 4px 0 0;\n    }\n    &:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n    &:hover {\n      background: ${colors.header.light.background};\n      color: ${colors.accent.active};\n    }\n  }\n`;\n\nexport const DropdownWraper = styled.div`\n  &:hover ${DropdownGroup} {\n    opacity: 1;\n    pointer-events: all;\n    transform: translateY(0);\n  }\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { handleAuthOut } from 'data/auth';\n\nimport { DropdownGroup } from 'styles/Common/Dropdown';\n\nimport { State } from 'types/state';\n\nconst Dropdown = (): JSX.Element => {\n  const user = useSelector((state: State) => state.user);\n  const authOut = () => handleAuthOut(user.id);\n  const noProfileEditYet = () => alert('Profile editing will be available in the near future');\n\n  return (\n    <DropdownGroup>\n      <li onClick={noProfileEditYet}>{user.name}</li>\n      <li onClick={authOut}>Log out</li>\n    </DropdownGroup>\n  );\n};\n\nexport default React.memo(Dropdown);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport UserIcon from '@material-ui/icons/AccountBox';\nimport EnterIcon from '@material-ui/icons/ExitToApp';\n\nimport { handleAuth } from 'data/auth';\n\nimport { Spinner } from 'styles/Common/Spinner';\nimport { AvatarBlock } from 'styles/Header';\n\nimport { State } from 'types/state';\nimport ConnectionStatus from 'components/Header/ConnectionStatus';\nimport Dropdown from 'components/Header/Dropdown';\nimport { DropdownWraper } from 'styles/Common/Dropdown';\n\nconst Avatar = (): JSX.Element => {\n  const user = useSelector((state: State) => state.user);\n  const UserPhoto = () => {\n    // TODO: check if the image is renadable & replace image only when it's loaded\n    return user.photoURL ? <img src={user.photoURL} alt={user.name} /> : <UserIcon />;\n  };\n\n  if (user.fetchig) {\n    return (\n      <AvatarBlock>\n        <Spinner size={15} />\n      </AvatarBlock>\n    );\n  }\n  if (user.id !== '') {\n    return (\n      <DropdownWraper>\n        <AvatarBlock>\n          <UserPhoto />\n          <ConnectionStatus />\n        </AvatarBlock>\n        <Dropdown />\n      </DropdownWraper>\n    );\n  }\n  return (\n    <AvatarBlock onClick={handleAuth} title=\"Log in\">\n      <EnterIcon />\n    </AvatarBlock>\n  );\n};\n\nexport default React.memo(Avatar);\n","import React from 'react';\n\nimport app from 'constants/../../package.json';\n\nimport { HeaderBlock, Logo } from 'styles/Header';\n\nimport Title from './Title';\n// import Tune from './Tune';\n// import Search from './Search';\nimport Avatar from './Avatar';\n\nconst Header = (): JSX.Element => {\n  return (\n    <HeaderBlock>\n      <Logo to=\"/\" title={`Rebel Plans v${app.version}`}>\n        <sup>Rebel Plans</sup>\n        <sub>Roadmap Creation &amp; Project Planning Tool</sub>\n      </Logo>\n      {/* <Tune /> */}\n      <Title title={app.description} />\n      {/* <Search /> */}\n      <Avatar />\n    </HeaderBlock>\n  );\n};\n\nexport default React.memo(Header);\n","export default {\n  ID: {\n    LENGTH: 20,\n    SYMBOLS: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n  },\n  DAY: {\n    WIDTH: 30,\n    HEADER: {\n      HEIGHT: 85,\n      MILE_HEIGHT: 125,\n    },\n  },\n  CARD: {\n    HEIGHT: 30,\n    VERTICAL_SPACE: 35,\n    HORIZONTAL_SPACE: 15,\n    RESIZE_TOLERANCE: 7,\n    CARDDECK_MOUSE_POSITION_FIX: [1, 1],\n  },\n  MILE: {\n    MARGIN: 8,\n  },\n  LOCALE: navigator.language || 'en-US',\n  COLUMN_MULTIPLIER: 2, // should be even to make sure we can figure out 'today'\n  PLAN: {\n    FREE: {\n      LIMIT: {\n        ROADMAPS: 3,\n      },\n    },\n  },\n  TIME: {\n    DAYS_IN_MONTH: 30,\n    AUTOSAVE_MS: 3000,\n    LAST_ACTIVE: 60000,\n    MILLISECONDS_IN_DAY: 86400000,\n  },\n};\n","import { customAlphabet } from 'nanoid';\n\nimport C from 'constants/index';\n\nconst nanoid = customAlphabet(C.ID.SYMBOLS, C.ID.LENGTH);\nexport default (): string => nanoid();\n","import nanoid from 'utils/nanoid';\n\nimport { NewCard, NewCardProp, SelectionCancel, SelectionDelete, SelectCard } from 'types/actions';\n\nexport const newCard = ({ line, from, until }: NewCardProp): NewCard => ({\n  type: 'NEW_CARD',\n  payload: {\n    id: nanoid(),\n    isNew: true,\n    line,\n    from,\n    until,\n  },\n});\n\nexport const selectCard = ({ id }: { id: string }): SelectCard => ({\n  type: 'SELECT_CARD',\n  payload: {\n    id,\n    isNew: false,\n  },\n});\n\nexport const selectionCancel = (): SelectionCancel => ({\n  type: 'SELECTION_CANCEL',\n});\n\nexport const selectionDelete = ({ id }: { id: string }): SelectionDelete => ({\n  type: 'SELECTION_DELETE',\n  payload: {\n    id,\n  },\n});\n","import { CSSProperties } from 'react';\n\nimport C from 'constants/index';\nimport { weekendColor as wC } from 'constants/colors';\n\nimport { placeholderInitState } from './subscribtion';\nimport { getDaysDiff, getDaysInterval } from './dates';\n\nimport { PlaceholderData } from 'types/index';\nimport { Card } from 'types/state';\nimport { CardTypes } from 'types/card';\n\nexport const getColumnSize = (): number => Math.ceil(window.innerWidth / C.DAY.WIDTH);\n\nexport const getExtraMonths = (): number => Math.ceil((getColumnSize() * C.COLUMN_MULTIPLIER) / C.TIME.DAYS_IN_MONTH);\n\nexport const getPlaceholderWidth = (x1: number, x2: number): number =>\n  Math.max(Math.round((x2 - x1) / C.DAY.WIDTH + 0.3), 1) || 1;\n\nexport const getPlaceholderData = (x1: number, x2: number, y1: number, shouldSkipAim: boolean): PlaceholderData => {\n  if (shouldSkipAim || (x1 === 0 && y1 === 0)) {\n    return {\n      style: { opacity: '0' },\n    };\n  }\n  if (x2 === 0) {\n    return {\n      style: { transform: `translate(${x1}px, ${y1}px)`, opacity: '1' },\n    };\n  }\n  const size = getPlaceholderWidth(x1, x2);\n  return {\n    style: {\n      transform: `translate(${x1}px, ${y1}px)`,\n      width: String((size - 1) * C.DAY.WIDTH) + 'px',\n    },\n    size,\n  };\n};\n\nexport const getProgressBackgroud = (\n  complete?: number,\n  color1: string = '#0bad00',\n  color2: string = '#ddd'\n): CSSProperties | undefined =>\n  typeof complete === 'number'\n    ? { background: `linear-gradient(to right, ${color1} ${complete}%, ${color2} ${complete}%)` }\n    : undefined;\n\nexport const isAimOnCard = (aim: typeof placeholderInitState, cards: Array<Card>): boolean => {\n  const shortList = cards.filter(\n    (card) =>\n      card.line === aim.line && card.from.localeCompare(aim.date) <= 0 && card.until.localeCompare(aim.date) >= 0\n  );\n  if (shortList.some((card) => card.from === aim.date || card.until === aim.date)) {\n    return true;\n  }\n  return Boolean(shortList.length);\n};\n\nexport const getCardStatus = (from: string, until: string, today: string, progress?: number): CardTypes | undefined => {\n  // No progress => No status\n  if (progress === undefined) {\n    return;\n  }\n  // 'pending':  card is in the future or starting today and progress is zero\n  // 'progress': card is in the future and progress > zero || progress >= proportion of today in the timeframe\n  // 'delayed':  progress < proportion of today in the timeframe\n  // 'complete': progress is 100\n  // 'dropped':  card is in the past and progress is zero\n  if (progress === 100) {\n    return 'complete';\n  }\n  // Today is after Until (Card is in the past)\n  if (today.localeCompare(until) > 0) {\n    return 'dropped';\n  }\n  if (progress === 0) {\n    // From is before Today (Card from past without progress)\n    if (today.localeCompare(from) > 0) {\n      return 'delayed';\n    }\n    // From is not yet reached or Today (Card is in the plan)\n    if (today.localeCompare(from) <= 0) {\n      return 'pending';\n    }\n  }\n  // If progress is between 0 and 100 it's either in progress or delayed\n  const fromToToday = getDaysDiff(from, today);\n  const todayToUntilPlusOne = getDaysInterval(today, until);\n  const proportion = fromToToday / (fromToToday + todayToUntilPlusOne);\n  if (progress / 100 < proportion) {\n    return 'delayed';\n  } else {\n    return 'progress';\n  }\n};\n\nexport const autoscaleTextarea = (textarea: HTMLTextAreaElement, setFocus: boolean = false): void => {\n  textarea.style.height = 'inherit';\n  textarea.style.height = `${textarea.scrollHeight}px`;\n  if (setFocus && Number.isInteger(textarea.selectionStart)) {\n    textarea.selectionStart = textarea.value.length;\n    textarea.selectionEnd = textarea.value.length;\n  }\n};\n\nexport const hasCardChanged = (edited: Card, original?: Card): boolean => {\n  if (!original) {\n    return true;\n  }\n  const editedKeys = Object.keys(edited) as [keyof Card];\n  const originalKeys = Object.keys(original) as [keyof Card];\n  if (editedKeys.length !== originalKeys.length) {\n    return true;\n  }\n  return (\n    editedKeys.some((key) => original[key] !== edited[key]) || originalKeys.some((key) => original[key] !== edited[key])\n  );\n};\n\nexport const isCardValid = (selection: Card): boolean =>\n  selection.id !== '' &&\n  selection.line >= 0 &&\n  selection.text !== '' &&\n  (selection.progress === undefined ||\n    (Number.isInteger(selection.progress) && selection.progress >= 0 && selection.progress <= 100)) &&\n  selection.from.length === 10 &&\n  selection.until.length === 10 &&\n  getDaysDiff(selection.from, selection.until) >= 0;\n\nexport const scrollToToday = (list: HTMLElement, today: HTMLElement, smooth?: boolean): void =>\n  list.scroll({\n    left: today.offsetLeft + (today.parentElement ? today.parentElement.offsetLeft : 0) - window.innerWidth / 2,\n    behavior: smooth ? 'smooth' : 'auto',\n  });\n\nexport const checkInView = (blockLeft: number, blockWidth: number, deckScroll: number, deckWidth: number): boolean =>\n  blockLeft > deckScroll - blockWidth && blockLeft < deckScroll + deckWidth;\n\nexport const getCardsDeckHeight = (maxSize: number): { height: string } => ({\n  height: `${C.DAY.HEADER.HEIGHT + (maxSize + 2) /* starts with 0 and we add 1 more */ * C.CARD.VERTICAL_SPACE}px`,\n});\n\nexport const getMonthBackgroud = (fDay: number, dayWidth: number): string => {\n  /* TODO: Allow customized weekends & make weekend generation a separagte UI function */\n  const daysWidth = (offset: number): number => (offset - fDay) * dayWidth;\n  const relativePart = fDay\n    ? `transparent ${daysWidth(6)}px, ${wC} ${daysWidth(6)}px, ${wC} ${daysWidth(8)}px, transparent ${daysWidth(8)}px`\n    : `${wC} ${dayWidth}px, transparent ${dayWidth}px, transparent ${6 * dayWidth}px, ${wC} ${6 * dayWidth}px`;\n  return `linear-gradient(90deg, #e8e9ea 1px, transparent 1px), linear-gradient(90deg, ${relativePart})`;\n};\n","import C from 'constants/index';\n\nimport { DateType, DateTypeWithWeek, FullDateType } from 'types';\nimport { MoveCard } from 'types/actions';\nimport { Cards } from 'types/state';\n\nimport { getExtraMonths } from 'utils/ui';\n\nexport const getTwoDigitDate = (number: number): string => `0${number}`.slice(-2);\n// export const getDataString = (date: DateType): string => `${date.year}-${date.month}-${date.day}`;\n\nexport const getYMDFromTimestamp = (timestamp: number | Date): DateType => {\n  const date = timestamp instanceof Date ? timestamp : new Date(timestamp);\n  return {\n    year: date.getUTCFullYear(),\n    month: date.getUTCMonth() + 1,\n    day: date.getUTCDate(),\n  };\n};\n\nexport const getYMDWFromTimestamp = (timestamp: number | Date): DateTypeWithWeek => {\n  const date = getYMDFromTimestamp(timestamp);\n  const firstDay = new Date(timestamp);\n  firstDay.setUTCHours(0);\n  firstDay.setUTCDate(1);\n  return {\n    ...date,\n    firstWeekDay: firstDay.getUTCDay(),\n  };\n};\n\nexport const getWeekNumber = (timestamp: number): number => {\n  const date = new Date(timestamp);\n  date.setUTCDate(date.getUTCDate() + 4 - (date.getUTCDay() || 7));\n  const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\n  const dateDiff = date.getTime() - yearStart.getTime();\n  return Math.ceil((dateDiff / C.TIME.MILLISECONDS_IN_DAY + 1) / 7);\n};\nexport const getWeekdayFromTimestamp = (timestamp: number, long: boolean = true): string => {\n  return new Date(timestamp).toLocaleDateString(C.LOCALE, { weekday: long ? 'long' : 'narrow' });\n};\n\nexport const getMonthNameFromTimestamp = (timestamp: number): string => {\n  return new Date(timestamp).toLocaleDateString(C.LOCALE, { month: 'long' });\n};\n\nexport const getMonthName = (date: DateType): string => {\n  return new Date(date.year, date.month - 1, date.day).toLocaleDateString(C.LOCALE, { month: 'long' });\n};\n\nexport const getDateForTooltip = (date: DateType): [string, string] => {\n  const dateObject = new Date(date.year, date.month - 1, date.day);\n  return [\n    dateObject.toLocaleDateString(C.LOCALE, { weekday: 'short' }),\n    dateObject.toLocaleDateString(C.LOCALE, { day: 'numeric', month: 'long', year: 'numeric' }),\n  ];\n};\n\n// For now we assume weekends are only Saturdays & Sundays\nexport const isWeekend = (timestamp: number): boolean => new Date(timestamp).getDay() % 6 === 0;\n\nexport const getTodayTimestamp = (): number => {\n  const today = new Date();\n  return Date.UTC(today.getFullYear(), today.getMonth(), today.getDate());\n};\n\nexport const getDataString = (timestamp?: number | Date): string => {\n  if (timestamp instanceof Date) {\n    return timestamp.toISOString().slice(0, 10);\n  }\n  return new Date(timestamp || getTodayTimestamp()).toISOString().slice(0, 10);\n};\n\nexport const getLocalString = (timestamp: number = getTodayTimestamp()): string => new Date(timestamp).toLocaleString();\n\nexport const getFullDateFromTimestamp = (timestamp: number, isToday: boolean = false): FullDateType => ({\n  date: getYMDFromTimestamp(timestamp),\n  dateString: getDataString(timestamp),\n  monthName: getMonthNameFromTimestamp(timestamp),\n  weekDayName: getWeekdayFromTimestamp(timestamp),\n  weekDayShort: getWeekdayFromTimestamp(timestamp, false),\n  weekNumber: getWeekNumber(timestamp),\n  isWeekend: isWeekend(timestamp),\n  isToday,\n});\n\nexport const getDatesArray = (columnSize: number, todayTimestamp: number): FullDateType[] =>\n  Array(columnSize)\n    .fill(todayTimestamp)\n    .map((dateString: number, index: number) => {\n      const timestamp = dateString + (index - columnSize / 2) * C.TIME.MILLISECONDS_IN_DAY;\n      return getFullDateFromTimestamp(timestamp, todayTimestamp === timestamp);\n    });\n\nexport const extendDatesArray = (datesArray: FullDateType[], extraDays: number, backward?: boolean): FullDateType[] => {\n  const lastDay = datesArray[backward ? 0 : datesArray.length - 1];\n  const lastTimestamp = Date.UTC(lastDay.date.year, lastDay.date.month - 1, lastDay.date.day);\n  const extraArray = Array(extraDays)\n    .fill(lastTimestamp)\n    .map((dateString: number, index: number) => {\n      const timestamp = dateString + (backward ? index - extraDays : index + 1) * C.TIME.MILLISECONDS_IN_DAY;\n      return getFullDateFromTimestamp(timestamp, false);\n    });\n  return backward ? [...extraArray, ...datesArray] : [...datesArray, ...extraArray];\n};\n\nexport const getDaysDiff = (date1: string | Date, date2: string | Date): number => {\n  if (date1 instanceof Date && date2 instanceof Date) {\n    return (date2.getTime() - date1.getTime()) / C.TIME.MILLISECONDS_IN_DAY;\n  }\n  return (new Date(date2).getTime() - new Date(date1).getTime()) / C.TIME.MILLISECONDS_IN_DAY;\n};\n\nexport const getDaysInterval = (date1: string, date2: string): number => getDaysDiff(date1, date2) + 1;\n\nexport const getDateFromDiff = (date: string, diff: number): string =>\n  getDataString(new Date(date).getTime() + diff * C.TIME.MILLISECONDS_IN_DAY);\n\nexport const getDaysInMonth = (year: number, month: number): number => new Date(year, month, 0).getDate();\n\nexport const getDaysDiffBetweenMonths = (date1: string, date2: string): number => {\n  const d1 = new Date(date1);\n  const d2 = new Date(date2);\n  d1.setDate(1);\n  d2.setDate(1);\n  return getDaysDiff(d1, d2);\n};\n\nexport const getExpandedDate = (year: number, month: number, offsetMonths: number): string => {\n  const isFuture = offsetMonths > 0;\n  const date = new Date(Date.UTC(year, month - (isFuture ? 0 : 1) + offsetMonths, isFuture ? 0 : 1));\n  return getDataString(date);\n};\n\nexport const getMilisecondsUntilTomorrow = (days: number = 1): number => {\n  const today = new Date();\n  const otherDay = new Date(today.getFullYear(), today.getMonth(), today.getDate() + days);\n  return otherDay.getTime() - today.getTime();\n};\n\nexport const getNewDates = ({ direction, dateDiff }: MoveCard['payload'], dates: string[]): string[] => {\n  switch (direction) {\n    case -1:\n      return [getDateFromDiff(dates[0], dateDiff), dates[1]];\n    case 1:\n      return [dates[0], getDateFromDiff(dates[1], dateDiff)];\n    default:\n      return dates.map((date) => getDateFromDiff(date, dateDiff));\n  }\n};\n\nexport const getMonthList = (from: string, until: string, date?: DateTypeWithWeek, swap = 1): DateTypeWithWeek[] => {\n  const [fromYear, fromMonth] = from.split('-');\n  const [untilYear, untilMonth] = until.split('-');\n  const { year, month } = until === '' && date ? date : { year: untilYear, month: untilMonth };\n  const yearMonth1 = [Number(fromYear), Number(fromMonth)];\n  const yearMonth2 = [Number(year), Number(month)];\n  const min = swap > 0 ? yearMonth1 : yearMonth2;\n  const max = swap < 0 ? yearMonth1 : yearMonth2;\n  const extraMonth = until === '' ? 0 : 1; // We need this extra month to add equal number of months before and after\n  const skipOneMonthForFuture = swap === -1 ? 1 : 0;\n\n  const yearsDiff = max[0] - min[0];\n  const monthsDiff = max[1] - min[1] + extraMonth + yearsDiff * 12;\n\n  // TODO: Ensure there is sufficient months offset around initially rendered months to avoid addition at scroll\n  return Array(monthsDiff)\n    .fill(0)\n    .map((_, index) => getYMDWFromTimestamp(new Date(min[0], min[1] + index + skipOneMonthForFuture)));\n};\n\nexport const getExtendedMonthList = (months: DateTypeWithWeek[], i: number, offset: string): DateTypeWithWeek[] => {\n  const swap = i === 0 ? 1 : -1;\n  const newMonths = getMonthList(offset, '', months[i], swap);\n  Array.prototype[i ? 'push' : 'unshift'].apply(months, newMonths);\n  return months;\n};\n\nexport const getFromUntil = (cards: Cards): { from: string; until: string } =>\n  Object.values(cards).reduce(\n    ({ from, until }, card) => {\n      if (from === '') {\n        return { from: card.from, until: card.until };\n      }\n      return {\n        from: from.localeCompare(card.from) < 0 ? from : card.from,\n        until: until.localeCompare(card.until) > 0 ? until : card.until,\n      };\n    },\n    { from: '', until: '' }\n  );\n\nexport const getUIOffset = (\n  from: string,\n  until: string,\n  todayString: string\n): { fromOffset: string; untilOffset: string } => {\n  const min = from ? (from.localeCompare(todayString) <= 0 ? from : todayString) : todayString;\n  const max = until ? (todayString.localeCompare(until) < 0 ? until : todayString) : todayString;\n\n  const extraMonths = getExtraMonths();\n  return {\n    fromOffset: getExpandedDate(Number(min.slice(0, 4)), Number(min.slice(5, 7)), -extraMonths),\n    untilOffset: getExpandedDate(Number(max.slice(0, 4)), Number(max.slice(5, 7)), extraMonths),\n  };\n};\n","import { getTwoDigitDate } from './dates';\n\nimport { DateTypeWithWeek } from 'types';\n\nexport type SubscribtionStatus = {\n  started?: boolean;\n  x1?: number;\n  x2?: number;\n  y1?: number;\n  line?: number;\n  date?: string;\n  done?: boolean;\n};\nexport type Callback<T> = (status: T) => void;\nexport type SetNotification<T> = (fn: Callback<T>) => void;\nexport type Subscribtion<T> = (status: T) => {\n  notify: SetNotification<T>;\n  update: Callback<T>;\n  setMonths: Callback<DateTypeWithWeek[]>;\n};\n\nexport const subscribtion: Subscribtion<SubscribtionStatus> = (init) => {\n  let status = init;\n  let months: DateTypeWithWeek[] = [];\n  let callItBack: Callback<SubscribtionStatus> | undefined;\n  return {\n    notify: (fn) => {\n      callItBack = fn;\n    },\n    update: (update) => {\n      if (update.date) {\n        const [m, d] = update.date.split('-').map((x) => parseInt(x, 10));\n        update.date = m ? `${months[m].year}-${getTwoDigitDate(months[m].month)}-${getTwoDigitDate(d)}` : status.date;\n      } else {\n        update.date = status.date;\n      }\n      status = update;\n      callItBack && callItBack(status);\n    },\n    setMonths: (newMonths: DateTypeWithWeek[]) => {\n      months = newMonths;\n    },\n  };\n};\n\nexport const placeholderInitState = {\n  started: false,\n  x1: 0,\n  x2: 0,\n  y1: 0,\n  line: 0,\n  date: '',\n  done: false,\n};\nexport const placeholder = subscribtion(placeholderInitState);\n\nexport const passID = (() => {\n  let id = '';\n  return {\n    set: (newID: string) => (id = newID),\n    get: () => id,\n  };\n})();\n","import C from 'constants/index';\n\nimport { placeholder } from './subscribtion';\n\nexport const putPlaceholder = (): void => {\n  placeholder.update({\n    started: true,\n  });\n};\n\nexport const movePlaceholder = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n  const curTarget = e.currentTarget as HTMLUListElement;\n  const target = e.target as HTMLLIElement;\n  if (target.parentElement === curTarget) {\n    const rect: ClientRect = curTarget.getBoundingClientRect();\n    const childRect: ClientRect = target.getBoundingClientRect();\n    const line = Math.floor((e.clientY - rect.top + curTarget.scrollTop - C.DAY.HEADER.HEIGHT) / C.CARD.VERTICAL_SPACE);\n    if (line >= 0) {\n      let month = -1;\n      Array.from(curTarget.children).some((item) => {\n        if (item instanceof HTMLElement && item.offsetWidth) {\n          month = month + 1;\n        }\n        return item === target;\n      });\n      placeholder.update({\n        x1: Math.trunc((target.offsetLeft + e.clientX - childRect.left) / C.DAY.WIDTH) * C.DAY.WIDTH,\n        x2: e.clientX - rect.left + curTarget.scrollLeft,\n        y1: C.DAY.HEADER.HEIGHT + line * C.CARD.VERTICAL_SPACE,\n        date: `${month}-${Math.max(Math.floor((e.clientX - childRect.left) / C.DAY.WIDTH), 0) + 1}`,\n        line,\n      });\n    }\n  }\n};\n\nexport const removePlaceholder = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n  if (e.type === 'mouseup') {\n    placeholder.update({\n      started: false,\n      done: true,\n    });\n  } else {\n    const target = e.relatedTarget as HTMLElement;\n    // TODO: check if we still need `data-form` attribute\n    if (!target || !target.getAttribute || target.getAttribute('data-form') !== 'edit') {\n      placeholder.update({\n        started: false,\n      });\n    }\n  }\n};\n","import C from 'constants/index';\n\nimport { putPlaceholder, movePlaceholder, removePlaceholder } from './placeholderActions';\nimport { passID } from './subscribtion';\n\nimport { MoveCard } from 'types/actions';\n\ntype EventHandler = (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n\ntype CardActions = {\n  pressInZone: EventHandler;\n  moveInZone: EventHandler;\n  releaseInZone: EventHandler;\n  enterZone: EventHandler;\n  leaveZone: EventHandler;\n};\n\nconst [mXFix, mYFix] = C.CARD.CARDDECK_MOUSE_POSITION_FIX;\n\nconst getMousePositionFromCardDeck = (button: HTMLButtonElement, target: HTMLElement): number[] => {\n  if (button === target) {\n    return [button.offsetLeft, button.offsetTop];\n  }\n  if (target instanceof HTMLButtonElement) {\n    return [target.offsetLeft, target.offsetTop];\n  }\n  const cardDeck = button.parentElement as HTMLLIElement;\n  return [target.offsetLeft - cardDeck.offsetLeft - mXFix, target.offsetTop - cardDeck.offsetTop - mYFix];\n};\n\nconst getCoords = (\n  e: React.MouseEvent<HTMLElement, MouseEvent>,\n  coord: number[],\n  el: HTMLButtonElement\n): [number, number] => {\n  const target = e.target as HTMLElement;\n  const nativeEvent = e.nativeEvent;\n  const [mX, mY] = getMousePositionFromCardDeck(el, target);\n  const x = mX + nativeEvent.offsetX - coord[0];\n  const y = mY + nativeEvent.offsetY - coord[1];\n  return [x, y];\n};\n\nexport default (moveCard: (moveCard: MoveCard['payload']) => void): CardActions => {\n  const card = {\n    coord: [0, 0],\n    width: 0,\n    el: null as HTMLButtonElement | null,\n  };\n  const resize = {\n    limit: 0,\n    pressX: 0,\n    direction: 0,\n    extraSize: 0,\n  };\n  let dateTable: HTMLUListElement | null = null;\n  let setAim = false;\n\n  const removeDateTable = () => {\n    if (dateTable) {\n      dateTable.classList.remove('drag');\n      dateTable = null;\n    }\n  };\n\n  const clearDesk = (immidiate: boolean, wasResized: boolean = false): void => {\n    if (!card.el || !dateTable) {\n      return;\n    }\n    if (wasResized) {\n      resize.limit = 0;\n      resize.pressX = 0;\n      resize.direction = 0;\n      resize.extraSize = 0;\n      dateTable.style.cursor = '';\n    }\n    card.el.style.pointerEvents = '';\n    card.el.style.transform = '';\n    card.el.style.opacity = '';\n    card.el.style.zIndex = '';\n    card.el = null;\n    if (immidiate) {\n      removeDateTable();\n    } else {\n      setTimeout(removeDateTable, 10);\n    }\n  };\n\n  const pressInZone = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n    if (card.el) {\n      return;\n    }\n    if (e.target instanceof HTMLButtonElement) {\n      dateTable = e.currentTarget as HTMLUListElement;\n      dateTable.classList.add('drag');\n      card.el = e.target;\n      const { clientWidth, offsetLeft, offsetTop } = card.el;\n      const { offsetX, offsetY, clientX } = e.nativeEvent;\n      if (offsetX < C.CARD.RESIZE_TOLERANCE || clientWidth - offsetX < C.CARD.RESIZE_TOLERANCE) {\n        dateTable.style.cursor = 'ew-resize';\n        resize.pressX = clientX;\n        resize.direction = offsetX < C.CARD.RESIZE_TOLERANCE ? -1 : 1;\n        card.width = parseInt(card.el.style.width, 10);\n        resize.limit = (card.width - C.CARD.HORIZONTAL_SPACE) / -C.DAY.WIDTH;\n        return;\n      }\n      card.coord = [offsetLeft + offsetX, offsetTop + offsetY];\n    } else if (e.target instanceof HTMLDivElement) {\n      setAim = true;\n      putPlaceholder();\n    }\n  };\n  const moveInZone = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n    if (!card.el) {\n      if (e.target instanceof HTMLDivElement) {\n        movePlaceholder(e);\n      }\n      return;\n    }\n    if (!card.el.style.transform) {\n      card.el.style.pointerEvents = 'none';\n      card.el.style.zIndex = '5';\n    }\n    if (resize.direction === 0) {\n      const [x, y] = getCoords(e, card.coord, card.el);\n      if (e.clientY < C.DAY.HEADER.MILE_HEIGHT) {\n        card.el.style.opacity = '0';\n      } else {\n        card.el.style.transform = `translate(${x}px, ${y}px)`;\n        if (card.el.style.opacity !== '') {\n          card.el.style.opacity = '';\n        }\n      }\n    } else {\n      const { clientX } = e.nativeEvent;\n      const diffX = clientX - resize.pressX;\n      const extra =\n        resize.direction < 0\n          ? Math.round((C.CARD.RESIZE_TOLERANCE - diffX) / C.DAY.WIDTH)\n          : Math.ceil((diffX - C.CARD.RESIZE_TOLERANCE) / C.DAY.WIDTH);\n      resize.extraSize = Math.max(extra, resize.limit);\n      const extraX = resize.extraSize * C.DAY.WIDTH;\n      card.el.style.width = `${card.width + extraX}px`;\n      if (resize.direction < 0) {\n        card.el.style.transform = `translateX(${-extraX}px)`;\n      }\n    }\n  };\n  const releaseInZone = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n    const id = passID.get();\n    if (resize.direction !== 0) {\n      if (resize.extraSize) {\n        if (id) {\n          moveCard({\n            id,\n            direction: resize.direction,\n            lineDiff: 0,\n            dateDiff: resize.extraSize * resize.direction,\n          });\n        } else {\n          throw Error('Card ID is missing, card will not be resized.');\n        }\n      }\n      clearDesk(card.el === e.target, true);\n      return;\n    }\n    if (card.el) {\n      if (card.el.style.opacity === '0') {\n        return;\n      }\n      if (card.el !== e.target) {\n        const [x, y] = getCoords(e, card.coord, card.el);\n        if (id) {\n          const lineDiff = Math.round(y / C.CARD.VERTICAL_SPACE);\n          const dateDiff = Math.round(x / C.DAY.WIDTH);\n          if (lineDiff || dateDiff) {\n            moveCard({\n              id,\n              direction: 0,\n              lineDiff,\n              dateDiff,\n            });\n          }\n        } else {\n          throw Error('Card ID is missing, card will not be moved.');\n        }\n      }\n      clearDesk(card.el === e.target);\n    } else if (setAim) {\n      setAim = false;\n      removePlaceholder(e);\n    }\n  };\n  const leaveZone = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n    if (e.type === 'mouseout') {\n      if (\n        e.relatedTarget instanceof HTMLButtonElement ||\n        e.relatedTarget instanceof HTMLHtmlElement ||\n        e.relatedTarget instanceof HTMLSpanElement ||\n        e.relatedTarget === null ||\n        (e.relatedTarget instanceof HTMLElement && e.relatedTarget.tagName.toLowerCase() === 'aside')\n      ) {\n        removePlaceholder(e);\n        setAim = false;\n      }\n      return;\n    }\n    if (card.el && !(e.target instanceof HTMLButtonElement) && resize.direction === 0) {\n      card.el.style.opacity = '0';\n    }\n  };\n  const enterZone = (): void => {\n    if (setAim) {\n      setAim = false;\n    }\n    if (card.el && card.el.style.opacity !== '') {\n      card.el.style.opacity = '';\n    }\n  };\n\n  return {\n    pressInZone,\n    moveInZone,\n    releaseInZone,\n    enterZone,\n    leaveZone,\n  };\n};\n","import { EditCard, MoveCard } from 'types/actions';\nimport { EditSelection } from 'types/state';\n\nexport const editCard = (props: EditSelection): EditCard => ({\n  type: 'EDIT_CARD',\n  payload: {\n    ...props,\n  },\n});\n\nexport const moveCard = (props: MoveCard['payload']): MoveCard => ({\n  type: 'MOVE_CARD',\n  payload: {\n    ...props,\n  },\n});\n","export type Card = {\n  id: string;\n  line: number;\n  text: string;\n  from: string;\n  until: string;\n  progress?: number;\n};\n\nexport type Long = string;\n\nexport type MileColors =\n  | 'purple'\n  | 'violet'\n  | 'indigo'\n  | 'blue'\n  | 'azur'\n  | 'green'\n  | 'yellow'\n  | 'orange'\n  | 'fire'\n  | 'pink';\n\nexport type Milestone = {\n  id: string;\n  text: string;\n  date: string;\n  from?: never;\n  until?: never;\n  progress?: never;\n  color: MileColors;\n};\n\nexport type Meta = {\n  createdAt: number;\n  from: string;\n  name: string;\n  until: string;\n};\n\nexport enum ElementType {\n  card = 'card',\n  milestone = 'milestone',\n  none = '',\n}\n\nexport type List<Type> = {\n  [key: string]: Type;\n};\n\nexport interface PersistentState {\n  cards: List<Card>;\n  longs: List<Long>;\n  milestones: List<Milestone>;\n}\n\nexport type Cards = PersistentState['cards'];\nexport type Milestones = PersistentState['milestones'];\n\nexport type SelectedElement = Card | Milestone | undefined;\n\nexport type EditSelection = Card;\n\nexport interface Selection extends EditSelection {\n  isNew: boolean;\n  type: ElementType;\n}\n\nexport interface State extends PersistentState {\n  selection: Selection;\n  user: {\n    id: string;\n    name: string;\n    email: string;\n    photoURL: string;\n    fetchig: boolean;\n    roadmaps: {\n      [key: string]: boolean;\n    };\n    roadmapsSet: boolean;\n  };\n  metas: List<Meta>;\n  ui: {\n    currentRoadmapID: string;\n    todayTimestamp: number;\n    cardsPosition: string;\n    fromOffset: string;\n    untilOffset: string;\n  };\n}\n","import styled from 'styled-components';\n\nexport const PlaceholderBlock = styled.span`\n  position: absolute;\n  display: block;\n  height: 26px;\n  line-height: 28px;\n  border: ${(props: { solid: boolean }) => (props.solid ? '1px dashed #999' : '1px dashed #ddd')};\n  border-radius: 5px;\n  padding: 0 13px 0 12px;\n  box-shadow: 0 2px 5px -2px rgba(0, 0, 0, 0.2);\n  margin: 1px 2px;\n  background: rgba(255, 255, 255, 0.5);\n  pointer-events: none;\n  left: 0;\n  top: 0;\n`;\n\nexport const PlaceholderContent = styled.span`\n  display: inline-block;\n  font-weight: lighter;\n  position: absolute;\n  text-align: right;\n  font-size: 12px;\n  color: #999;\n  right: 7px;\n  left: 7px;\n`;\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { newCard } from 'state/actions/selection';\nimport { placeholder, placeholderInitState } from 'utils/subscribtion';\nimport { isAimOnCard, getPlaceholderData, getPlaceholderWidth } from 'utils/ui';\nimport { getDateFromDiff } from 'utils/dates';\n\nimport { PlaceholderBlock, PlaceholderContent } from 'styles/Placeholder';\n\nimport { State, ElementType } from 'types/state';\n\nconst Placeholder = (): JSX.Element => {\n  const [aim, setAim] = useState(placeholderInitState);\n  const cards = useSelector((state: State) => state.cards);\n  const memoizedCards = useMemo(() => Object.values(cards), [cards]);\n  const isAimHoversCard = useMemo(() => isAimOnCard(aim, memoizedCards), [aim, memoizedCards]);\n  const selectionType = useSelector((state: State) => state.selection.type);\n  useEffect(() => {\n    if (selectionType === ElementType.none) {\n      setAim(placeholderInitState);\n    }\n  }, [selectionType]);\n  const dispatch = useDispatch();\n\n  placeholder.notify(({ started, x1, x2, y1, line, date = '', done = false }) => {\n    if (started !== undefined && !isAimHoversCard) {\n      if (started && started !== aim.started) {\n        setAim({\n          ...aim,\n          started,\n          date: date,\n          x2: aim.x1,\n        });\n      } else if (aim.started && done) {\n        dispatch(\n          newCard({\n            line: aim.line,\n            from: aim.date,\n            until: getDateFromDiff(aim.date, getPlaceholderWidth(aim.x1, aim.x2) - 1),\n          })\n        );\n      } else {\n        setAim(placeholderInitState);\n      }\n    }\n    if (x1 !== undefined && y1 !== undefined && line !== undefined) {\n      if (aim.started === false) {\n        if (aim.x1 !== x1 || aim.y1 !== y1) {\n          setAim({\n            ...aim,\n            x1,\n            y1,\n            line,\n            date,\n          });\n        }\n      } else if (x2 !== undefined) {\n        setAim({\n          ...aim,\n          x2,\n        });\n      }\n    }\n  });\n\n  const shouldSkipAim = (aim.x1 === 0 && aim.y1 === 0) || isAimHoversCard;\n  const { style, size } = getPlaceholderData(aim.x1, aim.x2, aim.y1, shouldSkipAim);\n\n  return (\n    <PlaceholderBlock solid={aim.started} style={style}>\n      <PlaceholderContent>{size}</PlaceholderContent>\n    </PlaceholderBlock>\n  );\n};\n\nexport default React.memo(Placeholder);\n","import React from 'react';\n\nconst Day = ({\n  day,\n  weekDay,\n  tip,\n  isToday,\n}: {\n  day: number;\n  weekDay: string;\n  tip: string;\n  isToday: boolean;\n}): JSX.Element => {\n  const className = isToday ? 'today' : undefined;\n  return (\n    <span className={className} data-weekday={weekDay} title={tip}>\n      {day}\n    </span>\n  );\n};\n\nexport default Day;\n","import React from 'react';\n\nimport { getDateForTooltip, getMonthName } from 'utils/dates';\nimport Day from 'components/Deck/Day';\n\nimport { DateType } from 'types';\n\nconst Month = ({ date, today }: { date: DateType; today: DateType }): JSX.Element => {\n  const monthName = `${getMonthName(date)} ${date.year}`;\n  const days = Array(date.day)\n    .fill(date)\n    .map(({ year, month }: { year: number; month: number }, i: number) => {\n      const day = i + 1;\n      const isToday = today.year === year && today.month === month && today.day === day;\n      const [weekDay, tip] = getDateForTooltip({ year, month, day });\n      return <Day key={day} day={day} weekDay={weekDay} tip={tip} isToday={isToday} />;\n    });\n\n  return (\n    <React.Fragment>\n      <aside className=\"monthname\">{monthName}</aside>\n      <aside className=\"days\">{days}</aside>\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(Month);\n","import styled from 'styled-components';\n\nimport C from 'constants/index';\nimport { getMonthBackgroud } from 'utils/ui';\n\nexport const DeckBlock = styled.section`\n  font-size: 0;\n  width: 100vw;\n  height: 100%;\n  overflow: scroll;\n  white-space: nowrap;\n  position: relative;\n  user-select: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\nexport const DeckInner = styled.section`\n  display: flex;\n  min-height: calc(100vh - 45px);\n`;\n\nexport const MonthsBlock = styled.div`\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.2);\n  background-image: ${({ firstDay }: { firstDay: number }) => getMonthBackgroud(firstDay, C.DAY.WIDTH)};\n  background-size: ${C.DAY.WIDTH}px 100%, ${C.DAY.WIDTH * 7}px 100%;\n  .monthname {\n    height: 54px;\n    font-size: 12px;\n    width: 100%;\n    padding: 8px 12px 3px;\n    margin-top: -100%;\n    position: sticky;\n    top: 0;\n    z-index: 8;\n    cursor: default;\n    background: #f7f8f9;\n    box-sizing: border-box;\n    color: #bbb;\n    box-shadow: rgba(0, 0, 0, 0.2) 2px 2px 2px, rgba(0, 0, 0, 0.06) 1px 0 0 inset;\n    pointer-events: all;\n  }\n  .days {\n    top: 25px;\n    position: sticky;\n    margin-top: -100%;\n    z-index: 9;\n    cursor: default;\n    user-select: none;\n    span {\n      width: 14px;\n      display: inline-block;\n      height: 14px;\n      font-size: 12px;\n      line-height: 14px;\n      padding: 8px 7px 7px 9px;\n      text-align: center;\n      color: #999;\n      position: relative;\n      z-index: 1;\n      &:before {\n        position: absolute;\n        width: 20px;\n        height: 20px;\n        left: 6px;\n        top: 5px;\n        border-radius: 50px;\n        z-index: -1;\n      }\n      &.today {\n        color: #fff;\n        &:hover {\n          color: #f00;\n          &:after {\n            background: #f00;\n          }\n        }\n        &:before {\n          content: '';\n          background: #f00;\n        }\n      }\n      &:hover {\n        transform: translateY(3px);\n        font-size: 10px;\n        padding-bottom: 4px;\n        &:before {\n          content: '';\n          background: transparent;\n          border: 1px solid currentColor;\n          left: 6px;\n          top: 2px;\n          border-radius: 3px;\n          width: 18px;\n          height: 18px;\n        }\n        &:after {\n          content: attr(data-weekday);\n          position: absolute;\n          width: 20px;\n          height: 8px;\n          background: #999;\n          font-size: 7px;\n          color: #fff;\n          line-height: 10px;\n          top: 2px;\n          border-radius: 3px 3px 0 0;\n          left: 6px;\n        }\n      }\n    }\n  }\n`;\n\nexport const Today = styled.mark`\n  position: absolute;\n  top: 0;\n  width: 2px;\n  height: 100%;\n  background: linear-gradient(#f00, #8c0756);\n  pointer-events: none;\n`;\n\nexport const TodayScroll = styled.button`\n  border: none;\n  font-size: 12px;\n  position: absolute;\n  right: ${({ scrollPosition }: { scrollPosition: number }) => (scrollPosition > 0 ? '0' : '100%')};\n  transform: ${({ scrollPosition }: { scrollPosition: number }) =>\n    scrollPosition === 0\n      ? 'translate(0)'\n      : scrollPosition > 0\n      ? 'translate(-12px)'\n      : 'translate(100%) translate(12px)'};\n  background: #f7f8f9;\n  box-shadow: 0 2px 6px -1px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  margin: 3px auto;\n  line-height: 24px;\n  padding: 0 7px;\n  transition: box-shadow 0.1s, transform 0.1s, opacity 0.1s;\n  cursor: pointer;\n  z-index: 10;\n  color: #555;\n  user-select: none;\n  opacity: ${({ scrollPosition }: { scrollPosition: number }) => (scrollPosition === 0 ? '0' : '1')};\n  pointer-events: ${({ scrollPosition }: { scrollPosition: number }) => (scrollPosition === 0 ? 'none' : undefined)};\n  &:hover {\n    box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.4), inset 0 0 0 1px rgba(0, 0, 0, 0.05);\n  }\n  &:before {\n    content: ${({ scrollPosition }: { scrollPosition: number }) => scrollPosition < 0 && `\"\\\\276E\"`};\n    color: #f00;\n    margin: 0 7px 0 3px;\n  }\n  &:after {\n    content: ${({ scrollPosition }: { scrollPosition: number }) => scrollPosition > 0 && `\"\\\\276F\"`};\n    color: #f00;\n    margin: 0 3px 0 7px;\n  }\n`;\n","import React, { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport Month from 'components/Deck/Month';\nimport { getYMDFromTimestamp } from 'utils/dates';\n\nimport C from 'constants/index';\n\nimport { MonthsBlock, Today } from 'styles/DateTable';\n\nimport { DateTypeWithWeek } from 'types';\nimport { State } from 'types/state';\n\nconst MonthsList = ({\n  todayRef,\n  months,\n  children,\n}: {\n  todayRef: React.RefObject<HTMLElement>;\n  months: DateTypeWithWeek[];\n  children: JSX.Element;\n}): JSX.Element => {\n  const todayTimestamp = useSelector((state: State) => state.ui.todayTimestamp);\n  const today = useMemo(() => getYMDFromTimestamp(todayTimestamp), [todayTimestamp]);\n  const cardsPosition = useSelector((state: State) => state.ui.cardsPosition);\n  const [cardsYear, cardsMonth] = useMemo(() => cardsPosition.split('-').map((val) => Number(val)), [cardsPosition]);\n  const todayStyle = useMemo(() => ({ left: `${today.day * C.DAY.WIDTH - C.DAY.WIDTH / 2}px` }), [today]);\n\n  const MonthBlock = useMemo(\n    () =>\n      function MonthMemo(\n        key: string,\n        monthStyle: {\n          width: string;\n        },\n        firstWeekDay: number,\n        isToday: boolean,\n        date: DateTypeWithWeek\n      ): JSX.Element {\n        return (\n          <MonthsBlock key={key} style={monthStyle} firstDay={firstWeekDay}>\n            {isToday && <Today ref={todayRef} style={todayStyle} />}\n            <Month date={date} today={today} />\n          </MonthsBlock>\n        );\n      },\n    [todayRef, todayStyle, today]\n  );\n\n  return (\n    <React.Fragment>\n      {months.map((date: DateTypeWithWeek) => {\n        const { year, month, day, firstWeekDay } = date;\n        const key = `${year}-${month}`;\n        const monthStyle = { width: `${day * C.DAY.WIDTH}px` };\n        const isToday = today.year === year && today.month === month;\n        if (cardsYear === year && cardsMonth === month) {\n          return (\n            <React.Fragment key={key}>\n              {children}\n              {MonthBlock(key, monthStyle, firstWeekDay, isToday, date)}\n            </React.Fragment>\n          );\n        }\n        return MonthBlock(key, monthStyle, firstWeekDay, isToday, date);\n      })}\n    </React.Fragment>\n  );\n};\n\nexport default MonthsList;\n","import styled from 'styled-components';\n\nimport { CardTypes } from 'types/card';\nimport colors, { statusColorMap } from 'constants/colors';\n\nexport const CardWaraper = styled.section`\n  display: inline-block;\n  position: relative;\n  z-index: 2;\n`;\n\nexport const DeckLineCounter = styled.aside`\n  float: left;\n  position: sticky;\n  left: 0;\n  width: 0;\n  z-index: 8;\n  &:before {\n    content: '';\n    width: 15px;\n    height: 100%;\n    position: absolute;\n    padding-bottom: 40px;\n    z-index: -1;\n  }\n  div {\n    color: ${colors.text.onLight.mute};\n    width: 11px;\n    height: 28px;\n    font-size: 9px;\n    line-height: 28px;\n    text-align: center;\n    padding: 0 1px 0 0;\n    margin-top: 5px;\n    border: 1px solid #ddd;\n    border-left: none;\n    background: ${colors.header.lite};\n    border-radius: 0 4px 4px 0;\n    letter-spacing: -0.1em;\n    transition: 0.2s;\n    cursor: pointer;\n    &:first-child {\n      margin-top: 85px;\n    }\n    &:hover {\n      border-color: #aaa;\n      color: ${colors.text.onLight.bold};\n    }\n    &:after {\n      content: '+';\n      letter-spacing: 0;\n      display: inline-block;\n      background: ${colors.logo.yellow};\n      border: inherit;\n      padding: 0 5px 0 9px;\n      border-radius: inherit;\n      z-index: -1;\n      position: absolute;\n      margin-top: -1px;\n      transform: translateX(-100%);\n      transition: 0.1s;\n    }\n    &[title]:after {\n      content: attr(title);\n    }\n    &:hover:after {\n      transform: translateX(0%);\n    }\n  }\n`;\n\nexport const CardBlockText = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const CardStatusSVG = styled.svg.attrs({\n  xmlns: 'http://www.w3.org/2000/svg',\n  viewBox: '0 0 300 300',\n})`\n  background: ${({ type }: { type: CardTypes }) => statusColorMap[type]};\n  border-radius: 50%;\n  padding: 2px;\n  fill: #fff;\n`;\n\nexport const CardBlockProgress = styled.mark`\n  position: absolute;\n  display: block;\n  left: 4px;\n  right: 4px;\n  bottom: 3px;\n  height: 2px;\n  background: transparent;\n  overflow: hidden;\n  opacity: 0.4;\n  border-radius: 0 0 2px 2px;\n  transition: 0.1s;\n`;\n\nexport const CardBlock = styled.button`\n  border: none;\n  text-align: left;\n  box-sizing: content-box;\n  font-size: 12px;\n  position: absolute;\n  background: #fff;\n  border-radius: 4px;\n  margin: 0 2px;\n  line-height: 28px;\n  padding: 0 5px 0 5px;\n  border: 1px solid #ccc;\n  transition: box-shadow 0.1s, opacity 0.1s;\n  cursor: pointer;\n  &:hover {\n    box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.3);\n  }\n  &:hover ${CardBlockProgress} {\n    opacity: 1;\n  }\n  & ${CardStatusSVG} {\n    position: absolute;\n    width: 0;\n    top: 3px;\n    right: 3px;\n    transform: translate(50%, -50%);\n    z-index: 2;\n    transition: 0.1s;\n  }\n  &:hover ${CardStatusSVG} {\n    width: 8px;\n    opacity: 1;\n  }\n  &.resized {\n    line-height: 28px;\n    border: 1px dashed #e2e2e2;\n    padding: 0 4px 0 6px;\n    cursor: ew-resize;\n  }\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    width: 5px;\n    bottom: 0;\n    opacity: 0;\n    cursor: ew-resize;\n  }\n  &:before {\n    left: 0;\n  }\n  &:after {\n    right: 0;\n  }\n  &:focus {\n    outline: none;\n  }\n  & * {\n    pointer-events: none;\n  }\n`;\n","import React from 'react';\n\nimport { CardStatusSVG } from 'styles/CardBlock';\n\nimport { CardTypes } from 'types/card';\n\n// Pending      gray (empty circle)\n// In progress  blue (chart pie)\n// Delayed     - organge (exclamation)\n// Complete    - green (check)\n// Dropped      red (cross)\n\nconst cardCases = (type: CardTypes): string => {\n  switch (type) {\n    case 'pending':\n      return 'M59 120a30 30 0 100 60 30 30 0 000-60zm93 0a30 30 0 100 60 30 30 0 000-60zm89 0a30 30 0 100 60 30 30 0 000-60z';\n    case 'progress':\n      return 'M150 150V15A135 135 0 1133.087 217.5L150 150';\n    case 'delayed':\n      return 'M150 21c-17 0-29 8-29 22v128c0 14 12 22 29 22 16 0 29-9 29-22V43c0-14-13-22-29-22zm0 201a29 29 0 100 58 29 29 0 000-58';\n    case 'complete':\n      return 'M119 260c-2 2-6 4-9 4s-7-2-10-4l-75-76c-8-8-8-20 0-28l9-10c8-7 21-7 29 0l47 48L237 66c8-8 21-8 29 0l9 10c8 8 8 20 0 28L119 260zm0 0';\n    case 'dropped':\n      return 'M185 150l66-66c8-7 8-19 0-27l-8-8c-8-8-20-8-27 0l-66 66-66-66c-7-8-19-8-27 0l-8 8c-8 8-8 20 0 27l66 66-66 66c-8 7-8 19 0 27l8 8c8 8 20 8 27 0l66-66 66 66c7 8 19 8 27 0l8-8c8-8 8-20 0-27l-66-66zm0 0';\n  }\n};\n\nconst CardStatus = ({ type, className }: { type?: CardTypes; className?: string }): JSX.Element | null =>\n  type ? (\n    <CardStatusSVG type={type} className={className}>\n      <path d={cardCases(type)} />\n    </CardStatusSVG>\n  ) : null;\n\nexport default React.memo(CardStatus);\n","import React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { getProgressBackgroud, getCardStatus } from 'utils/ui';\nimport { selectCard, selectionDelete } from 'state/actions/selection';\nimport { removePlaceholder } from 'utils/placeholderActions';\nimport CardStatus from 'assets/CardStatus';\nimport { passID } from 'utils/subscribtion';\nimport { getDataString } from 'utils/dates';\n\nimport CLR from 'constants/colors';\n\nimport { CardBlock, CardBlockProgress, CardBlockText } from 'styles/CardBlock';\n\nimport { Card, State } from 'types/state';\n\ntype Props = {\n  card: Card;\n  style: {\n    width: string;\n    top: string;\n  };\n};\n\nconst RoadmapCard = ({ card, style }: Props): JSX.Element => {\n  const dispatch = useDispatch();\n  const todayTimestamp = useSelector((state: State) => state.ui.todayTimestamp);\n  const todayString = useMemo(() => getDataString(todayTimestamp), [todayTimestamp]);\n  const typeS = useMemo(() => getCardStatus(card.from, card.until, todayString, card.progress), [card, todayString]);\n  const progS = useMemo(() => getProgressBackgroud(card.progress, typeS ? CLR.statusColors[typeS] : ''), [card, typeS]);\n\n  const clickCard = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n    if (\n      (e.target as HTMLButtonElement)?.parentElement?.parentElement?.classList.contains('drag') ||\n      e.altKey ||\n      e.ctrlKey ||\n      e.metaKey ||\n      e.shiftKey\n    ) {\n      return;\n    }\n    dispatch(\n      selectCard({\n        id: card.id,\n      })\n    );\n  };\n\n  const handleDoubleClick = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    if (e.altKey) {\n      dispatch(\n        selectionDelete({\n          id: card.id,\n        })\n      );\n    }\n  };\n  const handleContextMenu = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleMouseDown = () => {\n    passID.set(card.id);\n  };\n\n  // TODO: Optimize rendering reducing new objects\n  return (\n    <CardBlock\n      style={style}\n      onClick={clickCard}\n      onContextMenu={handleContextMenu}\n      onDoubleClick={handleDoubleClick}\n      onMouseEnter={removePlaceholder}\n      onTouchStart={handleMouseDown}\n      onMouseDown={handleMouseDown}\n      title={card.text}\n    >\n      <CardStatus type={typeS} />\n      <CardBlockProgress style={progS} />\n      <CardBlockText>{card.text}</CardBlockText>\n    </CardBlock>\n  );\n};\n\nexport default React.memo(RoadmapCard);\n","import React, { useMemo, useRef, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport Card from 'components/Deck/Card';\nimport { getDaysDiff, getDaysInterval } from 'utils/dates';\nimport { getCardsDeckHeight } from 'utils/ui';\n\nimport C from 'constants/index';\n\nimport { CardWaraper } from 'styles/CardBlock';\n\nimport { State } from 'types/state';\n\nconst CardsDeck = ({ setLines }: { setLines: React.Dispatch<React.SetStateAction<number>> }): JSX.Element => {\n  const cardsObject = useSelector((state: State) => state.cards);\n  const { cardsPosition } = useSelector((state: State) => state.ui);\n  const lineSize = useRef(-1);\n  // Ading 1 because lines count starts with 0\n  useEffect(() => (lineSize.current >= 0 ? setLines(lineSize.current + 1) : void null), [lineSize.current]);\n  const cards = useMemo(\n    () =>\n      Object.values(cardsObject).map((card) => {\n        const dayOffset = getDaysDiff(cardsPosition, card.from);\n        const dayDiff = getDaysInterval(card.from, card.until);\n        const style = {\n          left: `${dayOffset * C.DAY.WIDTH}px`,\n          width: `${dayDiff * C.DAY.WIDTH - C.CARD.HORIZONTAL_SPACE}px`,\n          top: `${C.DAY.HEADER.HEIGHT + card.line * C.CARD.VERTICAL_SPACE}px`,\n        };\n        lineSize.current = Math.max(lineSize.current, card.line);\n        return <Card key={card.id} card={card} style={style} />;\n      }),\n    [cardsObject, cardsPosition]\n  );\n  const wrapperStyle = useMemo(() => getCardsDeckHeight(lineSize.current), [lineSize.current]);\n\n  return <CardWaraper style={wrapperStyle}>{cards}</CardWaraper>;\n};\n\nexport default React.memo(CardsDeck);\n","import React from 'react';\nimport { DeckLineCounter } from 'styles/CardBlock';\n\nconst DeckLines = ({ lineCount }: { lineCount: number }) => (\n  <DeckLineCounter>\n    {Array(lineCount)\n      .fill(0)\n      .map((_, i) => (\n        <div key={i} title={undefined}>\n          {i + 1}\n        </div>\n      ))}\n  </DeckLineCounter>\n);\n\nexport default React.memo(DeckLines);\n","import { SetTodayTimestamp, SetUIOffset } from 'types/actions';\n\nexport const setUIOffset = (offset: SetUIOffset['payload']): SetUIOffset => ({\n  type: 'SET_UI_OFFSET',\n  payload: {\n    ...offset,\n  },\n});\n\nexport const setTodayTimestamp = (timestamp: number): SetTodayTimestamp => ({\n  type: 'SET_TODAY_TIMESTAMP',\n  payload: {\n    timestamp,\n  },\n});\n","import React, { useRef, useState, useLayoutEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { getDaysDiffBetweenMonths, getExpandedDate, getMonthList, getExtendedMonthList } from 'utils/dates';\nimport { getExtraMonths, scrollToToday } from 'utils/ui';\nimport cardActions from 'utils/cardActions';\nimport { placeholder } from 'utils/subscribtion';\nimport { moveCard } from 'state/actions/cards';\nimport Placeholder from 'components/Placeholder/Placeholder';\nimport MonthsList from 'components/Deck/MonthsList';\nimport CardsDeck from 'components/Deck/CardsDeck';\nimport DeckLines from 'components/Deck/DeckLines';\nimport { setUIOffset } from 'state/actions/ui';\n\nimport C from 'constants/index';\n\nimport { DeckBlock, DeckInner, TodayScroll } from 'styles/DateTable';\n\nimport { MoveCard } from 'types/actions';\nimport { State } from 'types/state';\nimport { DateTypeWithWeek } from 'types/index';\n\nconst Deck = (): JSX.Element | null => {\n  const dispatch = useDispatch();\n  const listRef = useRef<HTMLElement>(null);\n  const todayRef = useRef<HTMLElement>(null);\n  const scroll = useRef({\n    days: 0,\n    left: 0,\n    fire: false,\n    ready: true,\n    position: 0,\n  });\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [months, setMonths] = useState([] as DateTypeWithWeek[]);\n  const hasMonths = useMemo(() => months.length > 0, [months.length]);\n  const fromOffset = useSelector((state: State) => state.ui.fromOffset);\n  const untilOffset = useSelector((state: State) => state.ui.untilOffset);\n  const lastOffset = useRef({ fromOffset, untilOffset });\n  const updateMonths = (newMonths: DateTypeWithWeek[]): void => {\n    setMonths(newMonths);\n    placeholder.setMonths(newMonths);\n  };\n  useLayoutEffect(() => {\n    // This effect makes the initial scroll to `today`\n    if (scroll.current.ready && listRef.current && todayRef.current) {\n      scrollToToday(listRef.current, todayRef.current);\n      scroll.current.position = listRef.current.scrollLeft;\n      scroll.current.ready = false;\n    }\n  }, [hasMonths]);\n  useLayoutEffect(() => {\n    // This effect moves deck's scroll while user scrolls and when new months are added in front of existing dates\n    if (scroll.current.fire && listRef.current) {\n      listRef.current.scrollLeft = scroll.current.left;\n      scroll.current.fire = false;\n    }\n  }, [fromOffset, untilOffset]);\n  useMemo(() => {\n    // This function tracks offsets updates and adds new months before or after existing set\n    if (fromOffset && untilOffset) {\n      if (months.length === 0) {\n        // First time\n        updateMonths(getMonthList(fromOffset, untilOffset));\n      } else {\n        if (lastOffset.current.fromOffset !== fromOffset) {\n          updateMonths(getExtendedMonthList(months, 0, fromOffset));\n        } else if (lastOffset.current.untilOffset !== untilOffset) {\n          updateMonths(getExtendedMonthList(months, months.length - 1, untilOffset));\n        }\n      }\n    }\n    lastOffset.current = {\n      fromOffset,\n      untilOffset,\n    };\n  }, [months, fromOffset, untilOffset]);\n\n  const { pressInZone, moveInZone, releaseInZone, enterZone, leaveZone } = useMemo(() => {\n    const remoteDispatch = (cardDetails: MoveCard['payload']) => dispatch(moveCard(cardDetails));\n    return cardActions(remoteDispatch);\n  }, [dispatch]);\n\n  const showScrollButton = () => {\n    const list = listRef.current;\n    const scrollCurrent = scroll.current;\n    if (list && scrollCurrent) {\n      const todayElement = todayRef.current;\n      if (todayElement) {\n        const todayLeft = todayElement.getBoundingClientRect().left;\n        if (todayLeft < 0) {\n          setScrollPosition(-1);\n        } else if (todayLeft > list.offsetWidth) {\n          setScrollPosition(1);\n        } else {\n          setScrollPosition(0);\n        }\n      }\n      scrollCurrent.position = list.scrollLeft;\n    }\n  };\n\n  const renderPastOrFuture = (direction: number) => {\n    if (direction < 0 && listRef.current) {\n      const firstMonth = months[0];\n      const newDate = getExpandedDate(firstMonth.year, firstMonth.month, -getExtraMonths());\n      dispatch(\n        setUIOffset({\n          fromOffset: newDate,\n          untilOffset: untilOffset,\n        })\n      );\n      const extraLeftOffset = getDaysDiffBetweenMonths(newDate, fromOffset) * C.DAY.WIDTH;\n      scroll.current.left = listRef.current.scrollLeft + extraLeftOffset;\n      scroll.current.fire = true;\n    } else {\n      const lastMonth = months[months.length - 1];\n      const newDate = getExpandedDate(lastMonth.year, lastMonth.month, getExtraMonths());\n      dispatch(\n        setUIOffset({\n          fromOffset: fromOffset,\n          untilOffset: newDate,\n        })\n      );\n    }\n  };\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>): void => {\n    if (listRef.current && todayRef.current) {\n      scrollToToday(listRef.current, todayRef.current, true);\n      e.currentTarget.blur();\n    }\n  };\n\n  const scollDeck = (e: React.UIEvent<HTMLElement>) => {\n    const deck = e.currentTarget as HTMLElement;\n    const days = Math.floor(deck.scrollLeft / C.DAY.WIDTH);\n    if (scroll.current.days !== days) {\n      scroll.current.days = days;\n      showScrollButton();\n      // TODO: If window width stays the same daysVisible & daysTotal can be cached\n      const daysVisible = Math.ceil(deck.offsetWidth / C.DAY.WIDTH);\n      const daysTotal = Math.ceil(deck.scrollWidth / C.DAY.WIDTH);\n      if (days <= daysVisible) {\n        renderPastOrFuture(-1);\n      } else if (days >= daysTotal - daysVisible * 2) {\n        renderPastOrFuture(1);\n      }\n    }\n  };\n\n  const [lineCount, setLines] = useState(0);\n  const Months = useMemo(\n    () => (\n      <MonthsList todayRef={todayRef} months={months}>\n        <CardsDeck setLines={setLines} />\n      </MonthsList>\n    ),\n    [months, months.length, todayRef]\n  );\n\n  if (!months.length) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <TodayScroll scrollPosition={scrollPosition} tabIndex={scrollPosition ? undefined : -1} onClick={handleClick}>\n        Today\n      </TodayScroll>\n      <DeckBlock\n        ref={listRef}\n        onScroll={scollDeck}\n        onMouseEnter={enterZone}\n        onMouseOut={leaveZone}\n        onMouseLeave={leaveZone}\n      >\n        <DeckLines lineCount={lineCount} />\n        <DeckInner onMouseDown={pressInZone} onMouseMove={moveInZone} onMouseUp={releaseInZone}>\n          {Months}\n          <Placeholder />\n        </DeckInner>\n      </DeckBlock>\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(Deck);\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { selectionCancel } from 'state/actions/selection';\nimport { placeholder } from 'utils/subscribtion';\nimport Deck from 'components/Deck/Deck';\n\nimport { State } from 'types/state';\n\nconst Roadmap = (): JSX.Element | null => {\n  const currentRoadmapID = useSelector((state: State) => state.ui.currentRoadmapID);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const cancelAction = (e: KeyboardEvent): void => {\n      if (e.key.toLocaleLowerCase() === 'escape') {\n        e.preventDefault();\n        dispatch(selectionCancel());\n        placeholder.update({\n          started: false,\n        });\n      }\n    };\n    document.addEventListener('keydown', cancelAction);\n    return () => {\n      document.removeEventListener('keydown', cancelAction);\n    };\n  }, [dispatch]);\n\n  return currentRoadmapID ? <Deck /> : null;\n};\n\nexport default React.memo(Roadmap);\n","import styled from 'styled-components';\nimport { shake } from 'styles/Keyframes';\n\nexport const EditScreen = styled.section`\n  background: rgba(0, 0, 0, 0.2);\n  position: absolute;\n  overflow-y: scroll;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 100;\n`;\n\nexport const EditForm = styled.form`\n  background: #f7f8f9;\n  width: 600px;\n  max-width: 90%;\n  box-sizing: border-box;\n  margin: 15vh auto;\n  padding: 17px 20px 13px;\n  box-shadow: 0 0 0 0 #d22121, 0 10px 10px -5px rgba(0, 0, 0, 0.5), inset 0 0 2px rgba(0, 0, 0, 0.5);\n  border-radius: 5px;\n  transition: box-shadow 0.3s;\n  user-select: none;\n  &.invalid {\n    animation: ${shake} 0.3s linear;\n    box-shadow: 0 0 0 1px #d22121, 0 10px 10px -5px rgba(0, 0, 0, 0.5), inset 0 0 2px rgba(0, 0, 0, 0.5);\n  }\n`;\n\nexport const EditExtra = styled.div`\n  background: #e7e7ec;\n  margin: 12px -20px -13px;\n  padding: 19px;\n  font-size: 12px;\n  border-radius: 0 0 5px 5px;\n  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.3);\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport const Fieldset = styled.fieldset`\n  margin: 0;\n  padding: 0;\n  border: none;\n  display: inline-flex;\n  flex-wrap: wrap;\n  & > label,\n  & > span,\n  & > input {\n    margin-bottom: 5px;\n  }\n`;\n\nexport const FormLabel = styled.label`\n  font-size: 14px;\n  line-height: 27px;\n  background: #d9d9de;\n  border: 1px solid #999;\n  margin: 0 -5px 0 0;\n  padding: 0 13px 0 9px;\n  border-radius: 3px;\n  z-index: 3;\n`;\n\nexport const LabelWarp = styled(FormLabel).attrs({\n  as: 'span',\n})`\n  padding-left: ${({ join }: { join?: boolean }) => join && '13px'};\n  & + input[type='text'] {\n    width: 25px;\n    text-align: right;\n  }\n`;\n\nexport const FormInput = styled.input.attrs({\n  type: 'text',\n})`\n  background: #efeff3;\n  border: 1px solid #999;\n  border-radius: 3px;\n  margin: 0 5px 0 0;\n  padding: 0 7px 0 8px;\n  width: 75px;\n  font-size: 14px;\n  line-height: 27px;\n  z-index: 5;\n  &:focus {\n    background: #f7f8f9;\n  }\n  &::last-child {\n    margin-right: 0;\n  }\n  &:invalid,\n  &:invalid:focus {\n    border-color: #d22121;\n    outline-color: #d22121;\n  }\n`;\n\nexport const FormInputWrap = styled(FormInput).attrs({\n  as: 'span',\n})`\n  width: auto;\n  margin-right: -5px;\n`;\n\nexport const RangeInput = styled.input.attrs({\n  type: 'range',\n})`\n  height: 5px;\n  display: block;\n  margin: 11px 0 0;\n  appearance: none;\n  background: #2196f3;\n  border-radius: 4px;\n  box-shadow: inset 0 0px 1px 0px #333;\n  &::-webkit-slider-thumb {\n    appearance: none;\n    display: block;\n    width: 17px;\n    height: 17px;\n    background: #fff;\n    border-radius: 50%;\n    box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.2), inset 0 0 1px #555;\n  }\n  &::-moz-range-thumb,\n  &::-ms-thumb {\n    appearance: none;\n    display: block;\n    width: 17px;\n    height: 17px;\n    background: #fff;\n    border-radius: 50%;\n    box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.2), inset 0 0 1px #555;\n  }\n  &:disabled {\n    background: #999;\n  }\n  & + input[type='text'] {\n    width: 24px;\n    text-align: right;\n  }\n`;\n\nexport const EditExtraFields = styled.div`\n  flex: 1;\n  line-height: 0;\n  & hr {\n    background: transparent;\n    border: none;\n    margin: 0 auto;\n    padding-right: 5px;\n  }\n  & svg {\n    width: 15px;\n    height: 15px;\n    margin: 3px;\n    opacity: 0;\n    z-index: 1;\n    transform: translate(-40px, 0) scale(0.1);\n    transition: transform ease-in 0.1s, opacity ease-in 0.1s;\n    &.active {\n      opacity: 1;\n      transform: none;\n    }\n  }\n`;\n\nexport const EditExtraActions = styled.div`\n  flex: 0;\n`;\n\nexport const EditEntry = styled.textarea.attrs((props) => ({\n  placeholder: props.placeholder ? props.placeholder : 'Task name',\n  rows: 1,\n}))`\n  font: inherit;\n  width: 100%;\n  padding: 0;\n  border: none;\n  background: transparent;\n  resize: none;\n  &:focus {\n    outline: none;\n  }\n`;\n","import styled from 'styled-components';\n\nconst hoverColor = ({ action }: { action?: string }) => (action === 'danger' ? '#d22121' : '#5e88ad');\n\nexport const Button = styled.button.attrs({\n  type: 'button',\n})`\n  border: none;\n  width: 100%;\n  margin: 0;\n  padding: 6px 10px 5px;\n  font-size: 12px;\n  z-index: 1;\n  position: relative;\n  color: #777;\n  background: #f7f8f9;\n  box-shadow: 0 2px 6px -1px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #999;\n  &:hover:not(:disabled),\n  &:focus:not(:disabled) {\n    z-index: 2;\n    cursor: pointer;\n    color: ${hoverColor};\n    box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.4), inset 0 0 0 1px ${hoverColor};\n  }\n  svg {\n    width: 23px;\n    display: none;\n    fill: currentColor;\n    margin: -3px -7px -5px;\n  }\n  & + & {\n    margin-top: -1px;\n  }\n  &:disabled {\n    color: #ccc;\n    background: #eee;\n  }\n  &:first-child {\n    border-radius: 3px 3px 0 0;\n  }\n  &:last-child {\n    border-radius: 0 0 3px 3px;\n  }\n  @media (max-width: 768px) {\n    span {\n      display: none;\n    }\n    svg {\n      display: inline-block;\n    }\n  }\n`;\n","import React, { useState, ChangeEvent } from 'react';\n\nimport { LabelWarp, RangeInput, FormInput } from 'styles/EditScreen';\n\ntype Props = {\n  id: string;\n  min: number;\n  max: number;\n  value: number;\n  disabled: boolean;\n  change?: (value: number) => void;\n  save: () => void;\n  title?: string;\n  join?: boolean;\n};\n\nconst Range = ({ id, min, max, value, disabled, change, save, title, join }: Props): JSX.Element => {\n  const [val, setVal] = useState(value);\n  const handleChange = (e: ChangeEvent<HTMLInputElement>): void => {\n    const newVal = Math.min(Math.max(parseInt(e.target.value, 10), min), max);\n    if (!Number.isNaN(newVal)) {\n      setVal(newVal);\n      if (change) {\n        change(newVal);\n      }\n    }\n  };\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key.toLocaleLowerCase() === 'enter') {\n      e.preventDefault();\n      save();\n    }\n  };\n  return (\n    <React.Fragment>\n      {typeof title === 'string' ? <label htmlFor={id}>{title}</label> : null}\n      <LabelWarp join={join}>\n        <RangeInput id={id} min={min} max={max} disabled={disabled} value={val} onChange={handleChange} />\n      </LabelWarp>\n      <FormInput value={val} onChange={handleChange} onKeyDown={handleKeyDown} disabled={disabled} />\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(Range);\n","import styled from 'styled-components';\n\nexport const SwitchBlock = styled.label`\n  position: relative;\n  display: block;\n  width: 38px;\n  height: 21px;\n  margin: 3px 0;\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n    &:checked + span {\n      background-color: #2196f3;\n    }\n    &:focus + span {\n      box-shadow: 0 0 0 1px #efeff3, 0 0 0 3px #025fcc, 0 0 0 4px #fff;\n    }\n    &:checked + span:before {\n      transform: translateX(17px);\n    }\n  }\n  span {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #999;\n    transition: 0.1s;\n    border-radius: 12px;\n    &:before {\n      position: absolute;\n      content: '';\n      height: 17px;\n      width: 17px;\n      left: 2px;\n      bottom: 2px;\n      background-color: white;\n      transition: 0.1s;\n      border-radius: 50%;\n    }\n  }\n`;\n","import React from 'react';\n\nimport { FormInputWrap, FormLabel } from 'styles/EditScreen';\nimport { SwitchBlock } from 'styles/Form/Switch';\n\ntype Props = { id: string; value: boolean; toggle: (value: boolean) => void; title?: string };\n\nconst Switch = ({ id, value, toggle, title }: Props): JSX.Element => {\n  const handleToggle = () => toggle(!value);\n  return (\n    <React.Fragment>\n      {typeof title === 'string' ? <FormLabel htmlFor={id}>{title}</FormLabel> : null}\n      <FormInputWrap>\n        <SwitchBlock>\n          <input type=\"checkbox\" id={id} defaultChecked={value} onChange={handleToggle} />\n          <span />\n        </SwitchBlock>\n      </FormInputWrap>\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(Switch);\n","import React, { useRef, useLayoutEffect } from 'react';\n\nimport { Fieldset, FormLabel, FormInput } from 'styles/EditScreen';\n\ntype DateInputProps = {\n  date?: string;\n  setDate: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  save: () => void;\n  title: string;\n  setFocus?: boolean;\n};\n\nconst DateInput = ({ date, setDate, save, title, setFocus }: DateInputProps): JSX.Element | null => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  useLayoutEffect(() => {\n    if (inputRef !== null && inputRef.current instanceof HTMLInputElement) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, []);\n\n  const name = title.toLowerCase();\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key.toLocaleLowerCase() === 'enter') {\n      e.preventDefault();\n      save();\n    }\n  };\n\n  return date === undefined ? null : (\n    <Fieldset>\n      <FormLabel htmlFor={name}>{title}</FormLabel>\n      <FormInput\n        id={name}\n        ref={setFocus ? inputRef : undefined}\n        value={date}\n        onChange={setDate}\n        onKeyDown={handleKeyDown}\n        required\n        pattern=\"([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))\"\n      />\n    </Fieldset>\n  );\n};\n\nexport default React.memo(DateInput);\n","import styled from 'styled-components';\n\nexport const EditorWrap = styled.div`\n  line-height: normal;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding: 6px 7px 6px 6px;\n  margin-right: 19px;\n  .public-DraftEditor-content span[style*='font-family: monospace'] {\n    color: #670000;\n    padding: 0 2px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n  }\n  .public-DraftStyleDefault-pre {\n    padding: 3px 4px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    white-space: pre;\n    font-family: monospace;\n    pre {\n      margin: 0;\n    }\n  }\n\n  .DraftEditor-editorContainer,\n  .DraftEditor-root,\n  .public-DraftEditor-content {\n    height: inherit;\n    text-align: initial;\n  }\n  .public-DraftEditor-content[contenteditable='true'] {\n    -webkit-user-modify: read-write-plaintext-only;\n  }\n  .DraftEditor-root {\n    position: relative;\n  }\n  .DraftEditor-editorContainer {\n    background-color: rgba(255, 255, 255, 0);\n    border-left: 0.1px solid transparent;\n    position: relative;\n    z-index: 1;\n  }\n  .public-DraftEditor-block {\n    position: relative;\n  }\n  .DraftEditor-alignLeft .public-DraftStyleDefault-block {\n    text-align: left;\n  }\n  .DraftEditor-alignLeft .public-DraftEditorPlaceholder-root {\n    left: 0;\n    text-align: left;\n  }\n  .DraftEditor-alignCenter .public-DraftStyleDefault-block {\n    text-align: center;\n  }\n  .DraftEditor-alignCenter .public-DraftEditorPlaceholder-root {\n    margin: 0 auto;\n    text-align: center;\n    width: 100%;\n  }\n  .DraftEditor-alignRight .public-DraftStyleDefault-block {\n    text-align: right;\n  }\n  .DraftEditor-alignRight .public-DraftEditorPlaceholder-root {\n    right: 0;\n    text-align: right;\n  }\n  .public-DraftEditorPlaceholder-root {\n    color: #9197a3;\n    position: absolute;\n    width: 100%;\n    z-index: 1;\n  }\n  .public-DraftEditorPlaceholder-hasFocus {\n    color: #bdc1c9;\n  }\n  .DraftEditorPlaceholder-hidden {\n    display: none;\n  }\n  .public-DraftStyleDefault-block {\n    position: relative;\n    white-space: pre-wrap;\n    line-height: 1.2em;\n  }\n  .public-DraftStyleDefault-ltr {\n    direction: ltr;\n    text-align: left;\n  }\n  .public-DraftStyleDefault-rtl {\n    direction: rtl;\n    text-align: right;\n  }\n  .public-DraftStyleDefault-listLTR {\n    direction: ltr;\n  }\n  .public-DraftStyleDefault-listRTL {\n    direction: rtl;\n  }\n  .public-DraftStyleDefault-ol,\n  .public-DraftStyleDefault-ul {\n    margin: 16px 0;\n    padding: 0;\n  }\n  .public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR {\n    margin-left: 2.5em;\n  }\n  .public-DraftStyleDefault-depth0.public-DraftStyleDefault-listRTL {\n    margin-right: 2.5em;\n  }\n  .public-DraftStyleDefault-depth1.public-DraftStyleDefault-listLTR {\n    margin-left: 5em;\n  }\n  .public-DraftStyleDefault-depth1.public-DraftStyleDefault-listRTL {\n    margin-right: 5em;\n  }\n  .public-DraftStyleDefault-depth2.public-DraftStyleDefault-listLTR {\n    margin-left: 7.5em;\n  }\n  .public-DraftStyleDefault-depth2.public-DraftStyleDefault-listRTL {\n    margin-right: 7.5em;\n  }\n  .public-DraftStyleDefault-depth3.public-DraftStyleDefault-listLTR {\n    margin-left: 10em;\n  }\n  .public-DraftStyleDefault-depth3.public-DraftStyleDefault-listRTL {\n    margin-right: 10em;\n  }\n  .public-DraftStyleDefault-depth4.public-DraftStyleDefault-listLTR {\n    margin-left: 12.5em;\n  }\n  .public-DraftStyleDefault-depth4.public-DraftStyleDefault-listRTL {\n    margin-right: 12.5em;\n  }\n  .public-DraftStyleDefault-unorderedListItem {\n    list-style-type: square;\n    position: relative;\n  }\n  .public-DraftStyleDefault-unorderedListItem.public-DraftStyleDefault-depth0 {\n    list-style-type: disc;\n  }\n  .public-DraftStyleDefault-unorderedListItem.public-DraftStyleDefault-depth1 {\n    list-style-type: circle;\n  }\n  .public-DraftStyleDefault-orderedListItem {\n    list-style-type: none;\n    position: relative;\n  }\n  .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-listLTR:before {\n    left: -2.5em;\n    position: absolute;\n    text-align: right;\n    width: 2em;\n    line-height: 1.2em;\n  }\n  .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-listRTL:before {\n    position: absolute;\n    right: -2.5em;\n    text-align: left;\n    width: 2em;\n    line-height: 1.2em;\n  }\n  .public-DraftStyleDefault-orderedListItem:before {\n    content: counter(ol0) '. ';\n    counter-increment: ol0;\n  }\n  .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth1:before {\n    content: counter(ol1, lower-alpha) '. ';\n    counter-increment: ol1;\n  }\n  .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth2:before {\n    content: counter(ol2, lower-roman) '. ';\n    counter-increment: ol2;\n  }\n  .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth3:before {\n    content: counter(ol3) '. ';\n    counter-increment: ol3;\n  }\n  .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth4:before {\n    content: counter(ol4, lower-alpha) '. ';\n    counter-increment: ol4;\n  }\n  .public-DraftStyleDefault-depth0.public-DraftStyleDefault-reset {\n    counter-reset: ol0;\n  }\n  .public-DraftStyleDefault-depth1.public-DraftStyleDefault-reset {\n    counter-reset: ol1;\n  }\n  .public-DraftStyleDefault-depth2.public-DraftStyleDefault-reset {\n    counter-reset: ol2;\n  }\n  .public-DraftStyleDefault-depth3.public-DraftStyleDefault-reset {\n    counter-reset: ol3;\n  }\n  .public-DraftStyleDefault-depth4.public-DraftStyleDefault-reset {\n    counter-reset: ol4;\n  }\n`;\n","import { EditLong } from 'types/actions';\n\nexport const editLong = (props: EditLong['payload']): EditLong => ({\n  type: 'EDIT_LONG',\n  payload: {\n    ...props,\n  },\n});\n","import debounce from 'lodash/debounce';\nimport { convertToRaw, convertFromRaw, ContentState } from 'draft-js';\n\nimport { RawDraftContentState, RawDraftState, RawDraftBlock } from 'types/editor';\n\nimport C from 'constants/index';\n\nexport const debouncedSave = debounce((func: () => void) => func(), C.TIME.AUTOSAVE_MS);\n\nexport const cleanRaw = (raw: RawDraftContentState): RawDraftState => ({\n  ...raw,\n  blocks: raw.blocks.map((block) => {\n    const newBlock = Object.assign({}, block) as RawDraftBlock;\n    if (block.type === 'unstyled') {\n      delete newBlock.type;\n    }\n    if (block.depth === 0) {\n      delete newBlock.depth;\n    }\n    if (block.inlineStyleRanges.length === 0) {\n      delete newBlock.inlineStyleRanges;\n    }\n    if (block.entityRanges.length === 0) {\n      delete newBlock.entityRanges;\n    }\n    if (block.data && Object.keys(block.data).length === 0) {\n      delete newBlock.data;\n    }\n    return newBlock;\n  }),\n});\n\nexport const convertToJSON = (context: ContentState) => JSON.stringify(cleanRaw(convertToRaw(context)));\n\nexport const convertFromJSON = (initialRaw: string) => convertFromRaw(JSON.parse(initialRaw));\n","import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Editor, EditorState, RichUtils, getDefaultKeyBinding, KeyBindingUtil, DraftHandleValue } from 'draft-js';\n\nimport { EditorWrap } from 'styles/Editor';\nimport { editLong } from 'state/actions/longs';\nimport { State } from 'types/state';\nimport { debouncedSave, convertToJSON, convertFromJSON } from 'utils/editor';\n\nconst styleMap = {\n  STRIKETHROUGH: {\n    textDecoration: 'line-through',\n  },\n  HIGHLIGHT: {\n    backgroundColor: '#edff00',\n  },\n};\n\nconst LongEditor = (): JSX.Element => {\n  const dispatch = useDispatch();\n  const cardID = useSelector((state: State) => state.selection.id);\n  const rawState = useSelector((state: State) => state.longs[cardID]);\n  const [editorState, setEditorState] = useState(() =>\n    rawState ? EditorState.createWithContent(convertFromJSON(rawState)) : EditorState.createEmpty()\n  );\n  const dispatchEdit = (long: string) => dispatch(editLong({ cardID, long }));\n  const saveLong = (state: EditorState) => {\n    const context = state.getCurrentContent();\n    const plainText = context.getPlainText();\n    if (plainText.trim().length) {\n      const newRawState = convertToJSON(context);\n      if (rawState !== newRawState) {\n        dispatchEdit(newRawState);\n      }\n    } else if (rawState !== undefined) {\n      dispatchEdit('');\n    }\n  };\n\n  const handleTab = (e: React.KeyboardEvent) => changeState(RichUtils.onTab(e, editorState, 4));\n\n  const myKeyBindingFn = (e: React.KeyboardEvent): string | null => {\n    if (KeyBindingUtil.hasCommandModifier(e)) {\n      switch (e.code) {\n        case 'KeyB':\n          return 'bold';\n        case 'KeyM':\n          return 'code';\n        case 'KeyI':\n          return 'italic';\n        case 'KeyH':\n          return 'highlight';\n        case 'KeyU':\n          return 'underline';\n        case 'KeyS':\n          return 'strikethrough';\n        case 'BracketLeft':\n          return 'indent-minus';\n        case 'BracketRight':\n          return 'indent-plus';\n      }\n      if (e.shiftKey) {\n        switch (e.code) {\n          case 'KeyX':\n            return 'strikethrough';\n        }\n      }\n    }\n    return getDefaultKeyBinding(e);\n  };\n  const handleKeyCommand = (command: string): DraftHandleValue => {\n    switch (command) {\n      case 'bold':\n      case 'code':\n      case 'italic':\n      case 'strikethrough':\n      case 'underline':\n      case 'highlight':\n        const state =\n          RichUtils.handleKeyCommand(editorState, command) ||\n          RichUtils.toggleInlineStyle(editorState, command.toUpperCase());\n        if (state) {\n          changeState(state);\n          return 'handled';\n        }\n        return 'not-handled';\n      case 'indent-minus':\n      case 'indent-plus':\n        const reverse = command.split('-')[1] === 'plus' ? false : true;\n        const event = { shiftKey: reverse, preventDefault: () => undefined } as React.KeyboardEvent;\n        handleTab(event);\n        return 'handled';\n      default:\n        return 'not-handled';\n    }\n  };\n\n  const changeState = (state: EditorState) => {\n    setEditorState(state);\n    if (state.getCurrentContent() !== editorState.getCurrentContent()) {\n      debouncedSave(() => saveLong(state));\n    }\n  };\n\n  // Firing debounce with latest changes on blur\n  const saveState = () => debouncedSave.flush();\n\n  // Canceling debounce on componentDidUnmount\n  useEffect(() => () => debouncedSave.cancel(), []);\n\n  return (\n    <EditorWrap>\n      <Editor\n        editorState={editorState}\n        onChange={changeState}\n        onBlur={saveState}\n        onTab={handleTab}\n        placeholder=\"Add more context...\"\n        handleKeyCommand={handleKeyCommand}\n        keyBindingFn={myKeyBindingFn}\n        customStyleMap={styleMap}\n      />\n    </EditorWrap>\n  );\n};\n\nexport default React.memo(LongEditor);\n","import React, { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport Save from '@material-ui/icons/Save';\nimport Revert from '@material-ui/icons/NotInterested';\nimport Delete from '@material-ui/icons/DeleteForever';\n\nimport CardStatus from 'assets/CardStatus';\nimport { getCardStatus } from 'utils/ui';\nimport { getDataString } from 'utils/dates';\n\nimport { Button } from 'styles/Form/Button';\nimport { EditExtra, EditExtraActions, EditExtraFields, Fieldset } from 'styles/EditScreen';\n\nimport Range from './Range';\nimport Switch from './Switch';\nimport DateInput from './DateInput';\nimport Editor from './Editor';\n\nimport { EditSelection, State } from 'types/state';\nimport { CardDispatch } from 'types/actions';\n\ntype EditFieldsProps = {\n  selection: EditSelection;\n  setSelection: React.Dispatch<React.SetStateAction<EditSelection>>;\n  cardDispatch: CardDispatch;\n  setFocus: boolean;\n};\n\nconst EditFields = ({ selection, setSelection, cardDispatch, setFocus }: EditFieldsProps): JSX.Element | null => {\n  const todayTimestamp = useSelector((state: State) => state.ui.todayTimestamp);\n  const todayString = useMemo(() => getDataString(todayTimestamp), [todayTimestamp]);\n\n  const progress = selection.progress || 0;\n  const isProgressOn = Number.isFinite(selection.progress);\n  const setProgress = (value: number) =>\n    setSelection({\n      ...selection,\n      progress: value,\n    });\n  const setProgressOn = (value: boolean) => {\n    if (value) {\n      selection.progress = progress;\n    } else {\n      delete selection.progress;\n    }\n    setSelection({ ...selection });\n  };\n  const setDate = (type: 'from' | 'until') => (e: React.ChangeEvent<HTMLInputElement>) =>\n    setSelection({\n      ...selection,\n      [type]: e.target.value,\n    });\n\n  const setFrom = setDate('from');\n  const setUntil = setDate('until');\n\n  const { from, until } = selection;\n\n  return (\n    <EditExtra>\n      <EditExtraFields>\n        <DateInput date={from} setDate={setFrom} save={cardDispatch.save} title=\"From\" setFocus={setFocus} />\n        <DateInput date={until} setDate={setUntil} save={cardDispatch.save} title=\"Until\" />\n\n        <Fieldset>\n          <Switch id=\"showProgress\" value={isProgressOn} toggle={setProgressOn} title=\"Completion\" />\n          <Range\n            id=\"progress\"\n            min={0}\n            max={100}\n            disabled={!isProgressOn}\n            value={progress}\n            change={setProgress}\n            save={cardDispatch.save}\n            join={true}\n          />\n          {from && until && typeof progress === 'number' && (\n            <CardStatus\n              type={getCardStatus(from, until, todayString, progress)}\n              className={isProgressOn ? 'active' : undefined}\n            />\n          )}\n        </Fieldset>\n        <Editor />\n      </EditExtraFields>\n      <EditExtraActions>\n        <Button onClick={cardDispatch.save} title=\"Save changes\" action={'primary'}>\n          <Save />\n          <span>Save</span>\n        </Button>\n        <Button onClick={cardDispatch.cancel} title=\"Revert changes\">\n          <Revert />\n          <span>Revert</span>\n        </Button>\n        <Button onClick={cardDispatch.delete} title=\"Delete card\" action={'danger'}>\n          <Delete />\n          <span>Delete</span>\n        </Button>\n      </EditExtraActions>\n    </EditExtra>\n  );\n};\n\nexport default React.memo(EditFields);\n","import React, { useRef, useLayoutEffect } from 'react';\n\nimport { autoscaleTextarea } from 'utils/ui';\n\nimport { EditEntry } from 'styles/EditScreen';\n\nimport { EditSelection } from 'types/state';\nimport { CardDispatch } from 'types/actions';\n\nconst EditTitle = ({\n  selection,\n  setSelection,\n  cardDispatch,\n  enforceExtraFields,\n}: {\n  selection: EditSelection;\n  setSelection: React.Dispatch<React.SetStateAction<EditSelection>>;\n  cardDispatch: CardDispatch;\n  enforceExtraFields: React.Dispatch<React.SetStateAction<boolean>> | undefined;\n}): JSX.Element | null => {\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  useLayoutEffect(() => {\n    if (inputRef !== null && inputRef.current !== null) {\n      autoscaleTextarea(inputRef.current, true);\n    }\n  }, [selection.id]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    autoscaleTextarea(e.target as HTMLTextAreaElement);\n    setSelection({\n      ...selection,\n      text: e.target.value,\n    });\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key.toLocaleLowerCase() === 'enter') {\n      e.preventDefault();\n      cardDispatch.save();\n    } else if (e.key.toLocaleLowerCase() === 'tab') {\n      if (enforceExtraFields) {\n        e.preventDefault();\n        enforceExtraFields(true);\n      }\n    }\n  };\n\n  return (\n    <EditEntry\n      ref={inputRef}\n      autoFocus={true}\n      onChange={handleChange}\n      onKeyDown={handleKeyDown}\n      value={selection.text}\n    />\n  );\n};\n\nexport default React.memo(EditTitle);\n","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux'; // TODO: shallowEqual\n\nimport { editCard } from 'state/actions/cards';\nimport { selectionCancel, selectionDelete } from 'state/actions/selection';\nimport { hasCardChanged, isCardValid } from 'utils/ui';\n\nimport { EditScreen as Screen, EditForm } from 'styles/EditScreen';\n\nimport EditFields from './EditFields';\nimport EditTitle from './EditTitle';\n\nimport { EditSelection, State } from 'types/state';\nimport { CardDispatch } from 'types/actions';\n\nconst DefaultState = {\n  id: '',\n  text: '',\n  line: 0,\n  from: '',\n  until: '',\n} as EditSelection;\n\nconst EditScreen = (): JSX.Element | null => {\n  const dispatch = useDispatch();\n  const selection = useSelector((state: State) => state.selection);\n  const selectedElement = useSelector((state: State) => (selection.isNew ? undefined : state.cards[selection.id]));\n  const [isExtraFieldsEnforced, enforceExtraFields] = useState(selectedElement !== undefined);\n  const [newSelection, setNewSelection] = useState(DefaultState);\n  const [isInvalid, setInvalid] = useState(false);\n  useEffect(() => {\n    if (isInvalid) {\n      setTimeout(() => setInvalid(false), 500);\n    }\n  }, [isInvalid]);\n  useEffect(() => {\n    if (selection.id === '') {\n      enforceExtraFields(selectedElement !== undefined);\n    } else {\n      setNewSelection({\n        id: (selectedElement || selection).id,\n        text: (selectedElement || selection).text,\n        line: (selectedElement || selection).line,\n        from: (selectedElement || selection).from,\n        until: (selectedElement || selection).until,\n        progress: (selectedElement || selection).progress,\n      });\n    }\n    return () => {\n      setNewSelection(DefaultState);\n    };\n  }, [selection, selectedElement]);\n\n  if (selection.type === '' || newSelection.id === '') {\n    return null;\n  }\n\n  const cardDispatch: CardDispatch = {\n    save: () => {\n      if (isCardValid(newSelection)) {\n        return dispatch(hasCardChanged(newSelection, selectedElement) ? editCard(newSelection) : selectionCancel());\n      } else {\n        // TODO: Show user incorrect fields\n        setInvalid(true);\n        return;\n      }\n    },\n    cancel: () => dispatch(selectionCancel()),\n    delete: () => {\n      dispatch(\n        selectedElement\n          ? selectionDelete({\n              id: newSelection.id,\n            })\n          : selectionCancel()\n      );\n    },\n  };\n\n  const handleClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      cardDispatch.cancel();\n    }\n  };\n\n  const hasExtraFields = isExtraFieldsEnforced || Boolean(selectedElement);\n  return (\n    <Screen onClick={handleClick} data-form=\"edit\">\n      <EditForm className={isInvalid ? 'invalid' : undefined}>\n        <EditTitle\n          selection={newSelection}\n          setSelection={setNewSelection}\n          cardDispatch={cardDispatch}\n          enforceExtraFields={hasExtraFields ? undefined : enforceExtraFields}\n        />\n        {hasExtraFields ? (\n          <EditFields\n            selection={newSelection}\n            setSelection={setNewSelection}\n            cardDispatch={cardDispatch}\n            setFocus={isExtraFieldsEnforced}\n          />\n        ) : null}\n      </EditForm>\n    </Screen>\n  );\n};\n\nexport default React.memo(EditScreen);\n","import {\n  AuthFetch,\n  AuthSuccess,\n  AuthOut,\n  SetAccountRoadmaps,\n  AddAccountRoadmap,\n  RemoveAccountRoadmap,\n  SetCurrentRoadmap,\n  RemoveCurrentRoadmap,\n  RoadmapDataFetch,\n} from 'types/actions';\nimport { PersistentState, State } from 'types/state';\n\nexport const authFetch = (): AuthFetch => ({\n  type: 'AUTH_FETCH',\n});\n\nexport const authSuccess = (userData: AuthSuccess['payload']): AuthSuccess => ({\n  type: 'AUTH_SUCCESS',\n  payload: {\n    ...userData,\n  },\n});\n\nexport const authOut = (): AuthOut => ({\n  type: 'AUTH_OUT',\n});\n\nexport const setAccountRoadmaps = (roadmaps: State['user']['roadmaps'], meta: State['metas']): SetAccountRoadmaps => ({\n  type: 'SET_ACCOUNT_ROADMAPS',\n  payload: {\n    roadmaps,\n    meta,\n  },\n});\n\nexport const addAccountRoadmap = (roadmapName: string): AddAccountRoadmap => ({\n  type: 'ADD_ACCOUNT_ROADMAP',\n  payload: {\n    roadmapName,\n  },\n});\n\nexport const removeAccountRoadmap = (roadmapID: string): RemoveAccountRoadmap => ({\n  type: 'REMOVE_ACCOUNT_ROADMAP',\n  payload: {\n    roadmapID,\n  },\n});\n\nexport const setCurrentRoadmap = (currentRoadmapID: string): SetCurrentRoadmap => ({\n  type: 'SET_CURRENT_ROADMAP',\n  payload: {\n    currentRoadmapID,\n  },\n});\n\nexport const removeCurrentRoadmap = (): RemoveCurrentRoadmap => ({\n  type: 'REMOVE_CURRENT_ROADMAP',\n});\n\nexport const roadmapDataFetch = (roadmapData: PersistentState): RoadmapDataFetch => ({\n  type: 'ROADMAP_DATA_FETCH',\n  payload: {\n    ...roadmapData,\n  },\n});\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouteMatch, useHistory, useLocation } from 'react-router-dom';\n\nimport Roadmap from 'components/Roadmap/Roadmap';\nimport EditScreen from 'components/EditScreen/EditScreen';\nimport { setCurrentRoadmap, removeCurrentRoadmap } from 'state/actions/user';\n\nimport { RouteMatch } from 'types/routes';\nimport { State } from 'types/state';\n\nconst RoadmapScreen = (): JSX.Element => {\n  const history = useHistory();\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const { id: routeID } = (useRouteMatch('/roadmap/:id') as RouteMatch).params;\n  const roadmapsSet = useSelector((state: State) => state.user.roadmapsSet);\n  const currentRoadmapID = useSelector((state: State) => state.ui.currentRoadmapID);\n  const userRoadmapIDs = Object.keys(useSelector((state: State) => state.user.roadmaps));\n  useEffect(() => {\n    if (roadmapsSet) {\n      // TODO: Split two conditions if we want to create a roadmap for users without it\n      if (userRoadmapIDs.length && userRoadmapIDs.includes(routeID)) {\n        if (currentRoadmapID !== routeID) {\n          // We need to mark a roadmap as loaded to clean the state when navigating away\n          dispatch(setCurrentRoadmap(routeID));\n        }\n      } else {\n        // Account's roadmap list is loaded, but it's empty or doesn't contain the requested ID\n        history.push('/');\n      }\n    }\n    return () => {\n      // One of the roadmaps was loaded & rendered and we navigating away from this page\n      if (currentRoadmapID && location.pathname !== history.location.pathname) {\n        dispatch(removeCurrentRoadmap());\n      }\n    };\n  }, [history, location, dispatch, roadmapsSet, currentRoadmapID, routeID, userRoadmapIDs]);\n\n  return (\n    <React.Fragment>\n      <Roadmap />\n      <EditScreen />\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(RoadmapScreen);\n","import styled from 'styled-components';\nimport { move } from 'styles/Keyframes';\n\nexport const LandingIntro = styled.section`\n  color: #ddd;\n  overflow: hidden;\n  position: relative;\n  background: #252525;\n  padding: 0 calc(45% - 240px);\n  -webkit-font-smoothing: antialiased;\n  &.intro {\n    .cta {\n      margin-bottom: 5vh;\n      button {\n        color: #fff;\n        box-shadow: 0 3px 5px #000;\n      }\n    }\n  }\n  &.black {\n    background: linear-gradient(0deg, #000, #252525);\n  }\n  &.image {\n    background: url('smallstep.jpg') no-repeat top center;\n    background-size: cover;\n    height: 100vw;\n    min-height: 500px;\n    max-height: 80vh;\n  }\n  &.white {\n    margin-top: -20vh;\n    padding: 0 10vw;\n    background: linear-gradient(180deg, #fff0 0%, #fff 20vh, #fff 100%);\n    @media screen and (max-width: 1150px) {\n      padding: 0 5vw;\n    }\n    .cta {\n      margin: 8vh -5vw 10vh;\n      button {\n        background: #84ff00;\n        box-shadow: 0 5px 5px -5px #555;\n        &:first-child {\n          background: #edff00;\n        }\n        &:hover {\n          box-shadow: 0 5px 5px -5px #000;\n        }\n      }\n    }\n  }\n  &.end {\n    div {\n      margin: 0 12px;\n    }\n    ul {\n      width: 30%;\n      padding: 0;\n      margin: 1em 0 0;\n      list-style: none;\n      display: inline-block;\n      font-size: 14px;\n      font-weight: 100;\n      &:nth-of-type(3) {\n        width: 40%;\n      }\n      @media screen and (max-width: 460px) {\n        min-width: 100%;\n      }\n    }\n    li {\n      padding-bottom: 5px;\n    }\n  }\n  p {\n    margin: 1em 12px;\n  }\n  div,\n  h2 {\n    margin: 10vh 12px 10vh;\n  }\n  .cta {\n    text-align: center;\n    margin: 15vh auto;\n    span {\n      padding: 0 0.75em;\n    }\n  }\n  .hero {\n    font-size: calc(100vw - (45vw - 240px) * 2 - 24px);\n    line-height: 0;\n    @media screen and (max-width: 534px) {\n      font-size: calc(100vw - 24px);\n    }\n    &:before,\n    &:after {\n      content: '';\n      position: absolute;\n      font-size: inherit;\n      left: 0;\n      width: 100vw;\n      mix-blend-mode: multiply;\n    }\n    &:before {\n      height: 0.596em;\n      margin-top: -0.00001em;\n      border-top: 0.064em solid #ec4af5;\n      border-bottom: 0.063em solid #4ca4f5;\n    }\n    &:after {\n      height: 0.06em;\n      margin-top: 0.159em;\n      background: linear-gradient(\n        90deg,\n        #edff00 0%,\n        #edff00 calc(50vw - 0.136em),\n        #5dff00 calc(50vw - 0.136em),\n        #5dff00 100%\n      );\n    }\n    svg {\n      fill: #fff;\n      stroke: #fff;\n      stroke-width: 2px;\n      stroke-miterlimit: 10;\n    }\n  }\n  h3 {\n    text-transform: uppercase;\n    font-size: 20px;\n    margin: 2em 0 1em;\n    font-family: Impact;\n    font-weight: 100;\n  }\n  h6 {\n    border-top: 1px solid #666;\n    text-align: center;\n    padding-top: 2em;\n    font-weight: 100;\n    font-size: 12px;\n    margin: 2em 0;\n    strong {\n      white-space: nowrap;\n      font-weight: 400;\n      color: #fff;\n    }\n  }\n`;\n\nexport const LandingRuller = styled.hr`\n  display: inline-block;\n  position: absolute;\n  overflow: visible;\n  font-size: 0;\n  height: 20px;\n  left: -50%;\n  width: 200%;\n  margin-top: 8.5vh;\n  border: 10px solid #ec4af5;\n  border-bottom-color: #84ff00;\n  border-left: none;\n  border-right: none;\n  mix-blend-mode: overlay;\n  transform: rotate(-7deg);\n  transform-origin: top right;\n  &:after {\n    content: '';\n    display: inline-block;\n    position: absolute;\n    font-size: 0;\n    height: 20px;\n    width: 50%;\n    border: 10px solid #edff00;\n    border-bottom-color: #4ba4f5;\n    border-left: none;\n    border-right: none;\n    top: 50px;\n    animation: ${move} linear 60s infinite;\n  }\n`;\n\nexport const LandingTitle = styled.h2`\n  font-size: 86px;\n  position: relative;\n  z-index: 2;\n  white-space: nowrap;\n  color: #fff;\n  font-family: 'Franklin Gothic', 'Georgia', 'Arial Bold';\n  line-height: 0.8em;\n  font-weight: 900;\n  @media screen and (max-width: 534px) {\n    font-size: 16vw;\n  }\n  mark {\n    display: inline-block;\n    color: inherit;\n    background: #4ba4f5;\n    &:first-child {\n      background: #ec4af4;\n      margin: 0 0 0.12em -0.15em;\n      z-index: 1;\n      position: relative;\n    }\n  }\n`;\n\nexport const LandingButton = styled.button.attrs({\n  type: 'button',\n})`\n  border: 3px solid #84ff00;\n  background: none;\n  padding: 6px 10px 5px 10px;\n  position: relative;\n  z-index: 3;\n  cursor: pointer;\n  font-size: 18px;\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  letter-spacing: 0.05em;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  font-weight: 900;\n  &:first-child {\n    border-color: #edff00;\n  }\n  &:hover,\n  &:active {\n    filter: contrast(1.5);\n    background: #000;\n  }\n  &:active {\n    transform: translateY(1px);\n  }\n`;\n\nexport const LandingList = styled.ul`\n  margin: 0;\n  padding: 0;\n  color: #555;\n  font-size: 18px;\n  font-weight: 100;\n  display: flex;\n  flex-flow: wrap;\n  justify-content: space-evenly;\n  gap: 1vw;\n  @media screen and (max-width: 1240px) and (min-width: 1150px) {\n    justify-content: space-between;\n  }\n  li {\n    display: inline-block;\n    width: 15vw;\n    min-width: 200px;\n    background: #f7f7f7;\n    margin-bottom: 2vw;\n    padding: 12px 20px 12px 70px;\n    border: 1px solid #adaaa0;\n    min-height: 42px;\n  }\n  svg {\n    position: absolute;\n    width: 40px;\n    margin: 0 0 0 -55px;\n    fill: #adaaa0;\n  }\n`;\n","import React from 'react';\n\nconst RebelPlans = (): JSX.Element => (\n  <svg viewBox=\"0 0 377 302\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M 73.935 146.467 L 50.362 146.467 L 33.84 86.024 L 25.177 86.024 L 25.177 146.467 L 1 146.467 L 1 1 L 38.676 1 C 51.705 1 60.604 4.761 65.372 12.283 C 70.14 19.804 72.525 30.55 72.525 44.519 C 72.525 56.07 71.215 64.533 68.596 69.906 C 65.977 75.278 61.443 79.509 54.996 82.599 Z M 25.177 66.682 L 34.647 66.682 C 40.154 66.682 43.881 65.104 45.829 61.947 C 47.776 58.791 48.75 52.78 48.75 43.915 C 48.75 35.05 47.776 29.039 45.829 25.883 C 43.881 22.726 40.154 21.148 34.647 21.148 L 25.177 21.148 L 25.177 66.682 Z\"></path>\n    <path d=\"M 107.883 22.303 L 107.883 61.143 L 136.057 61.143 L 136.057 81.468 L 107.883 81.468 L 107.883 124.934 L 147.728 124.934 L 147.728 146.467 L 83.935 146.467 L 83.935 1.173 L 146.117 1.173 L 146.117 22.303 L 107.883 22.303 Z\"></path>\n    <path d=\"M 228.16 41.017 C 228.16 49.334 227.088 55.776 224.94 60.337 C 222.794 64.898 218.703 68.453 212.665 71.002 L 212.665 71.405 C 219.373 73.953 223.9 77.777 226.25 82.876 C 228.597 87.973 229.771 95.284 229.771 104.81 C 229.771 119.3 227.188 129.864 222.022 136.505 C 216.858 143.146 207.367 146.467 193.548 146.467 L 157.728 146.467 L 157.728 1.173 L 195.159 1.173 C 207.233 1.173 215.75 4.393 220.716 10.832 C 225.679 17.272 228.16 27.334 228.16 41.017 Z M 181.876 21.298 L 181.876 62.55 L 191.334 62.55 C 196.432 62.55 199.921 60.94 201.8 57.72 C 203.675 54.501 204.616 49.133 204.616 41.623 C 204.616 34.109 203.675 28.843 201.8 25.825 C 199.921 22.807 196.432 21.298 191.334 21.298 L 181.876 21.298 Z M 206.225 104.408 C 206.225 96.359 205.187 90.522 203.107 86.899 C 201.027 83.276 196.768 81.466 190.328 81.466 L 181.876 81.466 L 181.876 126.342 L 190.328 126.342 C 196.768 126.342 201.027 124.765 203.107 121.614 C 205.187 118.46 206.225 112.724 206.225 104.408 Z\"></path>\n    <path d=\"M 263.718 22.304 L 263.718 61.142 L 291.891 61.142 L 291.891 81.467 L 263.718 81.467 L 263.718 124.934 L 303.563 124.934 L 303.563 146.467 L 239.771 146.467 L 239.771 1.173 L 301.954 1.173 L 301.954 22.304 L 263.718 22.304 Z\"></path>\n    <path d=\"M 337.51 1 L 337.51 124.963 L 375.707 124.963 L 375.707 146.294 L 313.563 146.294 L 313.563 1 L 337.51 1 Z\"></path>\n    <path d=\"M 73.943 199.6 C 73.943 213.628 71.372 224.349 66.229 231.764 C 61.085 239.178 51.833 242.885 38.474 242.885 L 25.047 242.885 L 25.047 301 L 1 301 L 1 156.315 L 38.474 156.315 C 51.833 156.315 61.085 160.022 66.229 167.436 C 71.372 174.851 73.943 185.573 73.943 199.6 Z M 50.297 199.4 C 50.297 190.85 49.395 184.837 47.592 181.364 C 45.788 177.891 42.081 176.154 36.47 176.154 L 25.047 176.154 L 25.047 222.846 L 36.47 222.846 C 42.081 222.846 45.788 221.076 47.592 217.536 C 49.395 213.995 50.297 207.95 50.297 199.4 Z\"></path>\n    <path d=\"M 104.782 156.315 L 104.782 279.757 L 139.406 279.904 L 135.728 301 L 80.935 301 L 80.935 156.315 L 104.782 156.315 Z\"></path>\n    <path d=\"M 181.206 190.583 L 190.023 250.302 L 172.189 250.302 L 181.206 190.583 Z M 141.728 301 L 164.774 301 L 168.982 270.941 L 193.23 270.941 L 197.438 301 L 220.484 301 L 195.235 156.315 L 166.977 156.315 L 141.728 301 Z\"></path>\n    <path d=\"M 300.563 301 L 300.563 156.315 L 278.919 156.315 L 278.919 241.684 L 248.659 156.315 L 227.017 156.315 L 227.017 301 L 248.659 301 L 248.659 212.025 L 280.923 301 L 300.563 301 Z\"></path>\n    <path d=\"M 329.937 189.286 C 329.937 192.777 330.906 196.301 332.847 199.856 C 334.785 203.413 336.885 206.418 339.148 208.875 C 341.412 211.332 345.128 215.083 350.3 220.124 C 358.965 228.658 365.364 236.189 369.501 242.718 C 373.638 249.249 375.707 256.845 375.707 265.508 C 375.707 276.239 372.506 284.838 366.106 291.302 C 359.706 297.767 351.398 300.958 341.183 300.958 C 330.711 300.958 322.339 297.671 316.068 291.011 C 309.798 284.353 306.662 275.787 306.662 265.315 L 306.662 250.768 L 328.19 250.768 L 328.19 263.567 C 328.19 274.946 332.457 280.637 340.991 280.637 C 349.265 280.637 353.403 276.175 353.403 267.255 C 353.403 264.15 352.951 261.241 352.046 258.526 C 351.141 255.811 349.396 252.902 346.809 249.799 C 344.224 246.695 342.121 244.337 340.507 242.718 C 338.89 241.103 336.014 238.291 331.876 234.282 C 326.833 229.369 322.889 225.264 320.044 221.966 C 317.2 218.669 314.42 214.112 311.705 208.294 C 308.989 202.474 307.632 196.463 307.632 190.256 C 307.632 180.559 310.443 172.477 316.068 166.013 C 321.694 159.549 330.066 156.315 341.183 156.315 C 351.658 156.315 359.74 159.451 365.428 165.723 C 371.116 171.993 373.962 181.529 373.962 194.329 L 373.962 203.251 L 352.433 203.251 L 352.433 195.493 C 352.433 188.641 351.496 183.727 349.621 180.753 C 347.745 177.779 344.934 176.293 341.183 176.293 C 337.435 176.293 334.623 177.488 332.749 179.88 C 330.873 182.272 329.937 185.408 329.937 189.286 Z\"></path>\n  </svg>\n);\n\nexport default React.memo(RebelPlans);\n","import React from 'react';\n\nimport { handleAuth } from 'data/auth';\n\nimport MoneyOff from '@material-ui/icons/MoneyOff';\nimport CreditCard from '@material-ui/icons/CreditCard';\nimport Privacy from '@material-ui/icons/Lock';\nimport TrackingOff from '@material-ui/icons/PortableWifiOff';\nimport NoDataSharing from '@material-ui/icons/VpnLock';\nimport TrendingUp from '@material-ui/icons/TrendingUp';\n\nimport { LandingIntro, LandingButton, LandingRuller, LandingTitle, LandingList } from 'styles/Landing';\nimport RebelPlans from 'assets/RebelPlans';\n\nconst SignedOff = (): JSX.Element => {\n  return (\n    <React.Fragment>\n      <LandingIntro className=\"intro\">\n        <div className=\"hero\">\n          <RebelPlans />\n        </div>\n        <div className=\"cta\">\n          <LandingButton onClick={handleAuth}>Start a Free Trial</LandingButton>\n          <span>or</span>\n          <LandingButton onClick={handleAuth}>Log In</LandingButton>\n        </div>\n      </LandingIntro>\n      <LandingIntro className=\"black\">\n        <LandingTitle>\n          <mark>Big plans</mark>\n          <br />\n          <mark>Small steps</mark>\n        </LandingTitle>\n      </LandingIntro>\n      <LandingIntro className=\"image\">\n        <LandingRuller />\n      </LandingIntro>\n      <LandingIntro className=\"white\">\n        {/* <p>\n          We are the rebels.\n          <br />\n          <br />\n          We dream big, we know how to change the world for better.\n          <br />\n          <br />\n          Every day we move forward by making one firm step.\n          <br />\n          <br />\n          We plan patiently, but act bold and brave.\n          <br />\n          <br />\n          We have no doubts about reaching our goals,\n          <br />\n          because even the most ambitious journeys start with a few small steps.\n        </p> */}\n        <LandingList>\n          <li>\n            <MoneyOff />\n            Free forever basic plan\n          </li>\n          <li>\n            <CreditCard />\n            No credit card needed\n          </li>\n          <li>\n            <Privacy />\n            No password required\n          </li>\n          <li>\n            <TrendingUp />\n            Pay as your grow,\n            <br />\n            add extras as you need\n          </li>\n          <li>\n            <TrackingOff />\n            No ads, no popups,\n            <br />\n            no activity trackers\n          </li>\n          <li>\n            <NoDataSharing />\n            We never use or share\n            <br />\n            any of your data\n          </li>\n        </LandingList>\n        <div className=\"cta\">\n          <LandingButton onClick={handleAuth}>Start a Free Trial</LandingButton>\n          <span>or</span>\n          <LandingButton onClick={handleAuth}>Log In</LandingButton>\n        </div>\n      </LandingIntro>\n      <LandingIntro className=\"end\">\n        <div>\n          <h3>Rebel Plans</h3>\n          <ul>\n            <li>About Rebel Plans</li>\n            <li>Press and Media</li>\n            <li>Contact</li>\n          </ul>\n          <ul>\n            <li>Feature Index</li>\n            <li>Past Releases</li>\n            <li>Project Roadmap</li>\n          </ul>\n          <ul>\n            <li>Terms of Service</li>\n            <li>Privacy Policy</li>\n            <li>Responsible Disclosure</li>\n          </ul>\n          <h6>\n            Copyright &copy; 2021 <strong>Rebel Plans</strong> All rights reserved\n          </h6>\n        </div>\n      </LandingIntro>\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(SignedOff);\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nimport color from 'constants/colors';\n\nexport const RoadmapList = styled.section`\n  width: 300px;\n  margin: 20px auto;\n  font-size: 16px;\n`;\n\nexport const RoadmapListTitle = styled.span`\n  display: inline-block;\n  width: 100%;\n  padding: 0 10px;\n  box-sizing: border-box;\n`;\n\nexport const RoadmapListBubble = styled.span`\n  background: #aaa;\n  color: #fff;\n  padding: 0px 2px 0 3px;\n  border-radius: 4px;\n  font-weight: 100;\n  letter-spacing: 0.05em;\n  font-size: 13px;\n  float: right;\n  margin: 2px 0;\n  text-shadow: 1px 1px #999;\n`;\n\nexport const RoadmapListItem = styled(Link)`\n  display: inline-block;\n  width: 100%;\n  box-shadow: 0 2px 6px -1px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n  margin: 10px auto 0;\n  padding: 8px 10px 6px;\n  border-radius: 4px;\n  box-sizing: border-box;\n  text-decoration: none;\n  &:hover {\n    box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.4), inset 0 0 0 1px rgba(0, 0, 0, 0.05);\n  }\n`;\n\nexport const RoadmapListItemDetail = styled.small`\n  display: block;\n  font-size: 12px;\n  color: #ccc;\n  margin: 5px 0 2px;\n`;\n\nexport const RoadmapListAdd = styled.button.attrs({\n  type: 'button',\n})`\n  width: 100%;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n  margin: 10px auto 0;\n  padding: 8px 10px;\n  border-radius: 4px;\n  appearance: none;\n  background: none;\n  border: none;\n  font-size: 14px;\n  color: #aaa;\n  cursor: pointer;\n  &:hover {\n    color: ${color.accent.active};\n    box-shadow: inset 0 0 0 1px currentColor;\n  }\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { getLocalString } from 'utils/dates';\n\nimport C from 'constants/index';\n\nimport Landing from './Landing';\nimport {\n  RoadmapList,\n  RoadmapListTitle,\n  RoadmapListBubble,\n  RoadmapListItem,\n  RoadmapListAdd,\n  RoadmapListItemDetail,\n} from 'styles/Overview';\n\nimport { State } from 'types/state';\n\nconst limit = C.PLAN.FREE.LIMIT.ROADMAPS;\n\nconst Overview = ({ showInput }: { showInput: (value: boolean) => void }): JSX.Element | null => {\n  const userRoadmapsSet = useSelector((state: State) => state.user.roadmapsSet);\n  const userRoadmaps = useSelector((state: State) => state.user.roadmaps);\n  const metas = useSelector((state: State) => state.metas);\n  const user = useSelector((state: State) => state.user);\n  if (!user.fetchig && !user.id) {\n    return <Landing />;\n  }\n  if (!userRoadmapsSet) {\n    return null;\n  }\n  const roadmapsIDs = Object.keys(userRoadmaps);\n  const createRoadmap = () => showInput(true);\n  return (\n    <RoadmapList>\n      <RoadmapListTitle>\n        Available Roadmaps\n        <RoadmapListBubble title={`With free plan you can create up to ${limit} roadmaps`}>\n          {roadmapsIDs.length}/{limit}\n        </RoadmapListBubble>\n      </RoadmapListTitle>\n      {roadmapsIDs\n        .sort((a, b) => metas[a] && metas[b] && metas[a].createdAt - metas[b].createdAt)\n        .map(\n          (id, index) =>\n            index < limit && (\n              <RoadmapListItem key={id} to={`/roadmap/${id}/`}>\n                {metas[id].name}\n                <RoadmapListItemDetail>Creation date: {getLocalString(metas[id].createdAt)}</RoadmapListItemDetail>\n              </RoadmapListItem>\n            )\n        )}\n      {roadmapsIDs.length < limit && <RoadmapListAdd onClick={createRoadmap}>Create new roadmap</RoadmapListAdd>}\n    </RoadmapList>\n  );\n};\n\nexport default React.memo(Overview);\n","import React, { useLayoutEffect, useRef } from 'react';\n\nimport { autoscaleTextarea } from 'utils/ui';\n\nimport { EditScreen as Screen, EditForm, EditEntry } from 'styles/EditScreen';\n\nconst handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n  autoscaleTextarea(e.target as HTMLTextAreaElement);\n};\n\ntype Props = {\n  isShowingInput: boolean;\n  showInput: (value: boolean) => void;\n  roadmapName: string;\n  setRoadmapName: (value: string) => void;\n};\n\nconst SingleLineInput = ({ isShowingInput, showInput, roadmapName, setRoadmapName }: Props): JSX.Element | null => {\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  useLayoutEffect(() => {\n    if (inputRef !== null && inputRef.current !== null) {\n      autoscaleTextarea(inputRef.current, true);\n    }\n  }, []);\n\n  if (!isShowingInput) {\n    return null;\n  }\n\n  const handleClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      showInput(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key.toLocaleLowerCase() === 'enter') {\n      e.preventDefault();\n      const { value } = e.currentTarget;\n      if (value !== '' && roadmapName !== value) {\n        setRoadmapName(value);\n      }\n      showInput(false);\n    } else if (e.key.toLocaleLowerCase() === 'escape') {\n      showInput(false);\n    }\n  };\n\n  return (\n    <Screen onClick={handleClick}>\n      <EditForm>\n        <EditEntry\n          ref={inputRef}\n          autoFocus={true}\n          onChange={handleChange}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Roadmap name\"\n        />\n      </EditForm>\n    </Screen>\n  );\n};\n\nexport default React.memo(SingleLineInput);\n","import React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport Overview from 'components/Overview/Overview';\nimport SingleLineInput from 'components/Overview/SingleLineInput';\nimport { addAccountRoadmap } from 'state/actions/user';\n\nconst OverviewScreen = (): JSX.Element => {\n  const [isShowingInput, showInput] = useState(false);\n  const [roadmapName, setRoadmapName] = useState('');\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (roadmapName) {\n      dispatch(addAccountRoadmap(roadmapName));\n    }\n  }, [dispatch, roadmapName]);\n  return (\n    <React.Fragment>\n      <Overview showInput={showInput} />\n      <SingleLineInput\n        isShowingInput={isShowingInput}\n        showInput={showInput}\n        roadmapName={roadmapName}\n        setRoadmapName={setRoadmapName}\n      />\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(OverviewScreen);\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport Roadmap from 'components/Screens/Roadmap';\nimport Overview from 'components/Screens/Overview';\n\nconst Routes = (): JSX.Element => (\n  <Switch>\n    <Route path=\"/roadmap/:id\">\n      <Roadmap />\n    </Route>\n    <Route path=\"/\">\n      <Overview />\n    </Route>\n  </Switch>\n);\n\nexport default React.memo(Routes);\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport Header from 'components/Header/Header';\nimport Routes from 'components/Core/Routes';\nimport { getMilisecondsUntilTomorrow, getTodayTimestamp } from 'utils/dates';\nimport { setTodayTimestamp } from 'state/actions/ui';\n\nimport { State } from 'types/state';\nimport { MainBlock } from 'styles/Main';\n\nlet timeout: number;\n\nconst Core = (): JSX.Element => {\n  const todayTimestamp = useSelector((state: State) => state.ui.todayTimestamp);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const manageTimer = () => {\n      if (document.hidden) {\n        window.clearTimeout(timeout);\n      } else {\n        const newTimestamp = getTodayTimestamp();\n        if (todayTimestamp !== newTimestamp) {\n          dispatch(setTodayTimestamp(newTimestamp));\n        } else {\n          timeout = window.setTimeout(() => {\n            dispatch(setTodayTimestamp(getTodayTimestamp()));\n          }, getMilisecondsUntilTomorrow());\n        }\n      }\n    };\n    manageTimer();\n    document.addEventListener('visibilitychange', manageTimer);\n    return () => {\n      document.removeEventListener('visibilitychange', manageTimer);\n    };\n  }, [dispatch, todayTimestamp]);\n\n  const fetchig = useSelector((state: State) => state.user.fetchig);\n  const userID = useSelector((state: State) => state.user.id);\n  const history = useHistory();\n  useEffect(() => {\n    if (!fetchig && userID === '') {\n      history.push('/'); // User isn't defined (logged out), but fetching has stopped\n    }\n  }, [history, fetchig, userID]);\n\n  return (\n    <React.Fragment>\n      <Header />\n      <MainBlock>{fetchig ? null : <Routes />}</MainBlock>\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(Core);\n","import styled from 'styled-components';\nimport { SpinnerMixin } from 'styles/Common/Spinner';\n\nexport const MainBlock = styled.main`\n  overflow: scroll;\n  position: relative;\n  height: calc(100vh - 45px);\n  &:empty:before {\n    content: '';\n    ${SpinnerMixin}\n  }\n`;\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/analytics';\n\nexport default (saveAnalyticsState: (analyticsState: firebase.analytics.Analytics) => void): void => {\n  firebase.initializeApp({\n    apiKey: 'AIzaSyCEwZ2uDycrD2WnxZGF6LZGeXNJRf5Nxjo',\n    authDomain: 'auth.roadmap.business',\n    databaseURL: 'https://roadmap-business.firebaseio.com',\n    projectId: 'roadmap-business',\n    storageBucket: 'roadmap-business.appspot.com',\n    messagingSenderId: '191720794635',\n    appId: '1:191720794635:web:813af7fecc632a4f29f50e',\n    measurementId: 'G-KK1FJGXWFW',\n  });\n  if (process.env.NODE_ENV && process.env.NODE_ENV !== 'development' && saveAnalyticsState) {\n    saveAnalyticsState(firebase.analytics());\n  }\n};\n","import { getTodayTimestamp } from 'utils/dates';\n\nimport { ElementType, State } from 'types/state';\n\nexport default {\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    photoURL: '',\n    fetchig: false,\n    roadmaps: {},\n    roadmapsSet: false,\n  },\n  cards: {},\n  longs: {},\n  milestones: {},\n  selection: {\n    id: '',\n    isNew: false,\n    line: 0,\n    type: ElementType.none,\n    text: '',\n    from: '',\n    until: '',\n  },\n  metas: {},\n  ui: {\n    currentRoadmapID: '',\n    todayTimestamp: getTodayTimestamp(),\n    cardsPosition: '',\n    fromOffset: '',\n    untilOffset: '',\n  },\n} as State;\n","import produce from 'immer';\n\nimport initialState from 'state/initialState';\nimport { getDataString, getFromUntil, getUIOffset } from 'utils/dates';\n\nimport { Actions } from 'types/actions';\nimport { State } from 'types/state';\n\ntype StatePart = State['ui'];\n\nexport default (state: StatePart = initialState.ui, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'SET_CURRENT_ROADMAP':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          currentRoadmapID: action.payload.currentRoadmapID,\n        };\n      });\n    case 'REMOVE_CURRENT_ROADMAP':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          currentRoadmapID: '',\n          cardsPosition: '',\n          fromOffset: '',\n          untilOffset: '',\n        };\n      });\n    case 'AUTH_OUT':\n      return initialState.ui;\n    case 'ROADMAP_DATA_FETCH':\n      // TODO: Ignore if the data fetch is actually data submit\n      if (state.cardsPosition !== '' && state.fromOffset !== '' && state.untilOffset !== '') {\n        return state;\n      }\n      return produce(state, (nextState: StatePart) => {\n        // TODO: store these values in DB and use them also in UI as default offset\n        let { from, until } = getFromUntil(action.payload.cards);\n        const todayString = getDataString(nextState.todayTimestamp);\n        const { fromOffset, untilOffset } = getUIOffset(from, until, todayString);\n        if (!from || !until) {\n          from = from || todayString;\n          until = until || todayString;\n        }\n        return {\n          ...nextState,\n          cardsPosition: `${from.slice(0, 7)}-01`,\n          fromOffset: fromOffset,\n          untilOffset: untilOffset,\n        };\n      });\n    case 'SET_UI_OFFSET':\n      return state.fromOffset === action.payload.fromOffset && state.untilOffset === action.payload.untilOffset\n        ? state\n        : produce(state, (nextState: StatePart) => {\n            return {\n              ...nextState,\n              ...action.payload,\n            };\n          });\n    case 'SET_TODAY_TIMESTAMP':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          todayTimestamp: action.payload.timestamp,\n        };\n      });\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\n\nimport cards from './cards';\nimport longs from './longs';\nimport milestones from './milestones';\nimport selection from './selection';\nimport metas from './metas';\nimport user from './user';\nimport ui from './ui';\n\nexport default combineReducers({\n  cards,\n  longs,\n  milestones,\n  selection,\n  metas,\n  user,\n  ui,\n});\n","import produce from 'immer';\n\nimport { getNewDates } from 'utils/dates';\n\nimport initialState from '../initialState';\n\nimport { Actions } from 'types/actions';\nimport { State } from 'types/state';\n\ntype StatePart = State['cards'];\n\nexport default (state = initialState.cards, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'EDIT_CARD':\n      return produce(state, (nextState: StatePart) => {\n        if (!Number.isInteger(action.payload.progress)) {\n          delete action.payload.progress;\n        }\n        nextState[action.payload.id] = { ...action.payload };\n        return nextState;\n      });\n    case 'MOVE_CARD':\n      return produce(state, (nextState: StatePart) => {\n        const card = nextState[action.payload.id];\n        const [from, until] = getNewDates(action.payload, [card.from, card.until]);\n        const line = Math.max(card.line + action.payload.lineDiff, 0);\n        nextState[action.payload.id] = {\n          ...nextState[action.payload.id],\n          line,\n          from,\n          until,\n        };\n        return nextState;\n      });\n    case 'SELECTION_DELETE':\n      if (state[action.payload.id] !== undefined) {\n        return produce(state, (nextState: StatePart) => {\n          delete nextState[action.payload.id];\n          return nextState;\n        });\n      }\n      return state;\n    case 'ROADMAP_DATA_FETCH':\n      return {\n        ...action.payload.cards,\n      };\n    case 'REMOVE_CURRENT_ROADMAP':\n    case 'AUTH_OUT':\n      return initialState.cards;\n    default:\n      return state;\n  }\n};\n","import produce from 'immer';\n\nimport initialState from '../initialState';\n\nimport { Actions } from 'types/actions';\nimport { State } from 'types/state';\n\ntype StatePart = State['longs'];\n\nexport default (state = initialState.longs, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'ROADMAP_DATA_FETCH':\n      return {\n        ...action.payload.longs,\n      };\n    case 'EDIT_LONG':\n      return produce(state, (nextState: StatePart) => ({\n        ...nextState,\n        [action.payload.cardID]: action.payload.long,\n      }));\n    default:\n      return state;\n  }\n};\n","import produce from 'immer';\n\nimport initialState from '../initialState';\n\nimport { Actions } from 'types/actions';\nimport { State } from 'types/state';\n\ntype StatePart = State['milestones'];\n\nexport default (state = initialState.milestones, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'ADD_MILESTONE':\n      return produce(state, (nextState: StatePart) => {\n        nextState[action.payload.id] = { ...action.payload };\n        return nextState;\n      });\n    case 'DELETE_MILESTONE':\n      return produce(state, (nextState: StatePart) => {\n        Object.values(nextState).forEach((milestone) => {\n          if (milestone.date === action.payload.date) {\n            delete nextState[milestone.id];\n          }\n        });\n        return nextState;\n      });\n    case 'ROADMAP_DATA_FETCH':\n      return {\n        ...action.payload.milestones,\n      };\n    case 'REMOVE_CURRENT_ROADMAP':\n    case 'AUTH_OUT':\n      return initialState.milestones;\n    default:\n      return state;\n  }\n};\n","import produce from 'immer';\n\nimport initialState from '../initialState';\n\nimport { Actions } from 'types/actions';\nimport { State, ElementType } from 'types/state';\n\ntype StatePart = State['selection'];\n\nexport default (state = initialState.selection, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'NEW_CARD':\n    case 'SELECT_CARD':\n      return produce(state, (nextState: StatePart) => ({\n        ...nextState,\n        ...action.payload,\n        type: ElementType.card,\n      }));\n    case 'SELECTION_CANCEL':\n    case 'SELECTION_DELETE':\n    case 'EDIT_CARD':\n      return produce(state, () => initialState.selection);\n    case 'AUTH_OUT':\n      return initialState.selection;\n    default:\n      return state;\n  }\n};\n","import produce from 'immer';\n\nimport initialState from '../initialState';\n\nimport { Actions } from 'types/actions';\nimport { State } from 'types/state';\n\ntype StatePart = State['metas'];\n\nexport default (state: StatePart = initialState.metas, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'SET_ACCOUNT_ROADMAPS':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          ...action.payload.meta,\n        };\n      });\n    case 'AUTH_OUT':\n      return initialState.metas;\n    default:\n      return state;\n  }\n};\n","import produce from 'immer';\n\nimport initialState from '../initialState';\n\nimport { Actions } from 'types/actions';\nimport { State } from 'types/state';\n\ntype StatePart = State['user'];\n\nexport default (state: StatePart = initialState.user, action: Actions): StatePart => {\n  switch (action.type) {\n    case 'AUTH_FETCH':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          fetchig: true,\n        };\n      });\n    case 'AUTH_SUCCESS':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          ...action.payload,\n          fetchig: false,\n        };\n      });\n    case 'AUTH_OUT':\n      return initialState.user;\n    case 'SET_ACCOUNT_ROADMAPS':\n      return produce(state, (nextState: StatePart) => {\n        return {\n          ...nextState,\n          roadmaps: {\n            ...nextState.roadmaps,\n            ...action.payload.roadmaps,\n          },\n          roadmapsSet: true,\n        };\n      });\n    case 'REMOVE_ACCOUNT_ROADMAP':\n      return produce(state, (nextState: StatePart) => {\n        delete nextState.roadmaps[action.payload.roadmapID];\n        return nextState;\n      });\n    default:\n      return state;\n  }\n};\n","import firebase from 'firebase/app';\nimport { eventChannel, EventChannel, END } from 'redux-saga';\n\nimport { Card, PersistentState } from 'types/state';\n\nexport const getRoadmapContent = (roadmapID: string): EventChannel<PersistentState> =>\n  eventChannel((emiter) => {\n    const listener = firebase.database().ref(`roadmaps/${roadmapID}`);\n    listener.on('value', (snapshot) => {\n      const value = snapshot.val() as PersistentState;\n      if (value) {\n        emiter(value);\n      } else {\n        // This roadmap hasn't been found or access is denied\n        emiter(END);\n        listener.off();\n      }\n    });\n    return () => {\n      listener.off();\n    };\n  });\n\nexport const fetchAccountDetails = (userID: string): Promise<firebase.database.DataSnapshot> =>\n  firebase.database().ref(`users/${userID}`).once('value');\n\nexport const fetchRoadmapMeta = (roadmapID: string): Promise<firebase.database.DataSnapshot> =>\n  firebase.database().ref(`roadmaps/${roadmapID}/meta/`).once('value');\n\nexport const updateRemoteCardData = (currentRoadmapID: string, card: Card | { id: string }): void => {\n  const { id, ...content } = card;\n  const ref = firebase.database().ref(`roadmaps/${currentRoadmapID}/cards/${id}`);\n  if (Object.keys(content).length) {\n    void ref.update({\n      progress: null,\n      ...content,\n    });\n  } else {\n    void ref.remove();\n  }\n};\n\nexport const updateRemoteLong = (roadmapID: string, cardID: string, long: string): void => {\n  const ref = firebase.database().ref(`roadmaps/${roadmapID}/longs/${cardID}/`);\n  if (long) {\n    void ref.set(long);\n  } else {\n    void ref.remove();\n  }\n};\n\nexport const addRemoteAccountRoadmap = async (userID: string, time: number, roadmapName: string): Promise<string> => {\n  const roadmapID = firebase.database().ref(`users/${userID}/roadmaps/`).push().key;\n  if (roadmapID) {\n    await firebase\n      .database()\n      .ref(`users/${userID}/roadmaps/`)\n      .update({\n        [roadmapID]: true,\n      });\n    await firebase.database().ref(`roadmaps/${roadmapID}/meta/`).update({\n      name: roadmapName,\n      createdAt: time,\n    });\n    return roadmapID;\n  }\n  return '';\n};\n\nexport const removeRemoteAccountRoadmap = (userID: string, roadmapID: string): void => {\n  void firebase.database().ref(`users/${userID}/roadmaps/${roadmapID}/`).remove();\n};\n","import firebase from 'firebase/app';\n\nimport { State } from 'types/state';\n\nexport const createAccount = (user: State['user']): void =>\n  void firebase.database().ref(`users/${user.id}`).set({\n    email: user.email,\n    name: user.name,\n  });\n","import firebase from 'firebase';\nimport { put, fork, take, call, select, TakeEffect, ForkEffect } from 'redux-saga/effects';\n\nimport { fetchAccountDetails, fetchRoadmapMeta } from 'data/data';\nimport { createAccount } from 'data/newUser';\nimport { setAccountRoadmaps } from 'state/actions/user';\n\nimport { AuthSuccess } from 'types/actions';\nimport { Meta, State } from 'types/state';\n\nfunction* fetchUserRoadmapsData(userID: string) {\n  const snapshot = (yield call(fetchAccountDetails, userID)) as firebase.database.DataSnapshot;\n  const value = (yield snapshot.val()) as {\n    roadmaps?: State['user']['roadmaps'];\n  } | null;\n  if (!value) {\n    const user = (yield select((state: State) => state.user)) as State['user'];\n    yield call(createAccount, user);\n  }\n  if (value?.roadmaps) {\n    const roadmapIDs = Object.keys(value.roadmaps);\n    if (roadmapIDs) {\n      const metas = {} as State['metas'];\n      for (const roadmapID of roadmapIDs) {\n        const snapshot = (yield call(fetchRoadmapMeta, roadmapID)) as firebase.database.DataSnapshot;\n        metas[roadmapID] = snapshot.val() as Meta;\n      }\n      yield put(setAccountRoadmaps(value.roadmaps, metas));\n    } else {\n      yield put(setAccountRoadmaps({}, {}));\n    }\n  } else {\n    yield put(setAccountRoadmaps({}, {}));\n  }\n}\n\nexport function* watchAuth(): Generator<TakeEffect | ForkEffect<void>, void, AuthSuccess> {\n  while (true) {\n    const action = yield take('AUTH_SUCCESS');\n    if (typeof action.payload?.id === 'string') {\n      yield fork(fetchUserRoadmapsData, action.payload.id);\n    }\n  }\n}\n","import { fork, take, select, TakeEffect, SelectEffect, ForkEffect } from 'redux-saga/effects';\n\nimport { updateRemoteCardData } from 'data/data';\n\nimport { CardEditActions } from 'types/actions';\nimport { Card, State } from 'types/state';\n\ntype Actions = CardEditActions | Card | State['user']['roadmaps'] | undefined;\n\nexport function* watchCardChange(): Generator<TakeEffect | SelectEffect | ForkEffect<unknown>, void, Actions | string> {\n  while (true) {\n    const action = (yield take(['EDIT_CARD', 'MOVE_CARD', 'SELECTION_DELETE'])) as CardEditActions;\n    const card = (yield select((state: State) => state.cards[action.payload.id])) as Card | undefined;\n    const currentRoadmapID = (yield select((state: State) => state.ui.currentRoadmapID)) as string;\n    if (currentRoadmapID) {\n      yield fork(updateRemoteCardData, currentRoadmapID, card || { id: action.payload.id });\n    }\n  }\n}\n","import { fork, take, select, TakeEffect, SelectEffect, ForkEffect } from 'redux-saga/effects';\n\nimport { updateRemoteLong } from 'data/data';\n\nimport { EditLong } from 'types/actions';\nimport { State } from 'types/state';\n\nexport function* watchTextChange(): Generator<TakeEffect | SelectEffect | ForkEffect<void>, void, EditLong | string> {\n  while (true) {\n    const { payload } = (yield take(['EDIT_LONG'])) as EditLong;\n    const roadmapID = (yield select((state: State) => state.ui.currentRoadmapID)) as string;\n    if (roadmapID && payload.cardID) {\n      yield fork(updateRemoteLong, roadmapID, payload.cardID, payload.long);\n    }\n  }\n}\n","import { PersistentState } from 'types/state';\n\nexport const getKeyWithTrueValue = (arr: Array<[string, boolean]> = []): string | undefined =>\n  (arr.find((pair) => pair[1]) || [])[0];\n\nexport const hydrateWithIDs = (data: PersistentState): PersistentState => {\n  (Object.keys(data) as Array<keyof typeof data>).forEach((type) => {\n    if (type !== 'longs') {\n      const obj = data[type];\n      (Object.keys(obj) as Array<keyof typeof obj>).forEach((key) => {\n        const string = String(key);\n        obj[string].id = string;\n      });\n    }\n  });\n  return data;\n};\n","import {\n  put,\n  fork,\n  take,\n  call,\n  select,\n  race,\n  TakeEffect,\n  ForkEffect,\n  SelectEffect,\n  CallEffect,\n  PutEffect,\n} from 'redux-saga/effects';\nimport equal from 'fast-deep-equal';\n\nimport { getRoadmapContent, addRemoteAccountRoadmap } from 'data/data';\nimport { removeAccountRoadmap, roadmapDataFetch, setAccountRoadmaps } from 'state/actions/user';\nimport { hydrateWithIDs } from 'utils/arrays';\n\nimport C from 'constants/index';\n\nimport { AddAccountRoadmap, SetAccountRoadmaps, SetCurrentRoadmap } from 'types/actions';\nimport { PersistentState, State } from 'types/state';\n\nfunction* fetchCurrentRoadmapData(currentRoadmapID: string) {\n  const channel = getRoadmapContent(currentRoadmapID);\n  let isCancelled = false;\n  try {\n    while (true) {\n      const { roadmapData } = (yield race({\n        roadmapData: take(channel),\n        cancel: take('REMOVE_CURRENT_ROADMAP'),\n      })) as { roadmapData: PersistentState };\n      if (roadmapData) {\n        // TODO: Warn about changes in meta (it will not be auto-updated)\n        // TODO: Consider storing IDs in DB (use more space, but faster and we can compare values with Redux store)\n        if (roadmapData.cards === undefined && roadmapData.milestones === undefined) {\n          // New roadmaps are empty and will fail check with previous (also empty) state, so we have this shortcut\n          yield put(\n            roadmapDataFetch({\n              cards: {},\n              longs: {},\n              milestones: {},\n            })\n          );\n        } else {\n          const hydratedData = hydrateWithIDs({\n            cards: roadmapData.cards || {},\n            longs: roadmapData.longs || {},\n            milestones: roadmapData.milestones || {},\n          });\n          const cards: PersistentState['cards'] = yield select((state) => state.cards);\n          const longs: PersistentState['longs'] = yield select((state) => state.longs);\n          const milestones: PersistentState['milestones'] = yield select((state) => state.milestones);\n          const equalCards = equal(hydratedData.cards, cards);\n          const equalLongs = equal(hydratedData.longs, longs);\n          const equalMiles = equal(hydratedData.milestones, milestones);\n          if (!equalCards || !equalLongs || !equalMiles) {\n            yield put(roadmapDataFetch(hydratedData));\n          }\n        }\n      } else {\n        isCancelled = true;\n        channel.close();\n      }\n    }\n  } finally {\n    if (!isCancelled) {\n      // Error in data fetch: requested roadmap doesn't exist. Removing its ID from user account.\n      yield put(removeAccountRoadmap(currentRoadmapID));\n    }\n  }\n}\n\nexport function* watchCurrentRoadmapChange(): Generator<TakeEffect | ForkEffect<void>, void, SetCurrentRoadmap> {\n  while (true) {\n    const { currentRoadmapID } = (yield take(['SET_CURRENT_ROADMAP'])).payload;\n    if (typeof currentRoadmapID === 'string' && currentRoadmapID.length === C.ID.LENGTH) {\n      yield fork(fetchCurrentRoadmapData, currentRoadmapID);\n    }\n  }\n}\n\nexport function* watchAddRoadmap(): Generator<\n  TakeEffect | SelectEffect | CallEffect<string> | PutEffect<SetAccountRoadmaps> | ForkEffect<void>,\n  void,\n  AddAccountRoadmap | string\n> {\n  while (true) {\n    const { roadmapName } = ((yield take(['ADD_ACCOUNT_ROADMAP'])) as AddAccountRoadmap).payload;\n    if (typeof roadmapName === 'string' && roadmapName.length) {\n      const userID = (yield select((state: State) => state.user.id)) as string;\n      const createdAt = Date.now();\n      const roadmapID = (yield call(addRemoteAccountRoadmap, userID, createdAt, roadmapName)) as string;\n      yield put(\n        setAccountRoadmaps(\n          {\n            [roadmapID]: true,\n          },\n          {\n            [roadmapID]: {\n              createdAt,\n              from: '',\n              name: roadmapName,\n              until: '',\n            },\n          }\n        )\n      );\n    }\n  }\n}\n","export const setRecurrentEvent = (fn: () => void, timeout: number): (() => void) => {\n  let eventActive = true;\n  const recurrentEvent = (func: () => void, time: number): void => {\n    setTimeout(() => {\n      if (eventActive) {\n        func();\n        recurrentEvent(func, time);\n      }\n    }, time);\n  };\n  return (() => {\n    fn();\n    recurrentEvent(fn, timeout);\n    return () => {\n      eventActive = false;\n    };\n  })();\n};\n","import { take } from 'redux-saga/effects';\n\nimport { writeUserLastActive } from 'data/user';\nimport { AuthSuccess } from 'types/actions';\nimport { setRecurrentEvent } from 'utils/recurrent';\nimport C from 'constants/index';\n\nexport function* sendLastActive() {\n  let stopSending = () => {};\n  while (true) {\n    const actionLogin = (yield take('AUTH_SUCCESS')) as AuthSuccess;\n    if (typeof actionLogin.payload?.id === 'string') {\n      stopSending = setRecurrentEvent(() => writeUserLastActive(actionLogin.payload.id), C.TIME.LAST_ACTIVE);\n    }\n    yield take('AUTH_OUT');\n    stopSending();\n  }\n}\n","import { take, TakeEffect } from 'redux-saga/effects';\n\nimport { analytics } from 'utils/analytics';\n\nimport { Actions } from 'types/actions';\n\nimport app from 'constants/../../package.json';\n\nexport function* sendAnalytics(): Generator<TakeEffect, void, Actions> {\n  while (true) {\n    const action = yield take('*');\n    if (action.type === 'AUTH_SUCCESS') {\n      analytics.act()?.logEvent('login', {\n        method: 'Google',\n        uuid: action.payload.id,\n        app_version: app.version,\n      });\n    }\n  }\n}\n","import { all } from 'redux-saga/effects';\n\nimport { watchAuth } from './auth';\nimport { watchCardChange } from './card';\nimport { watchTextChange } from './text';\nimport { watchAddRoadmap, watchCurrentRoadmapChange } from './roadmap';\nimport { sendLastActive } from './user';\nimport { sendAnalytics } from './analytics';\n\nexport default function* rootSaga(): Generator<unknown, void, unknown> {\n  yield all([\n    watchAuth(),\n    watchCardChange(),\n    watchTextChange(),\n    watchAddRoadmap(),\n    watchCurrentRoadmapChange(),\n    sendLastActive(),\n    sendAnalytics(),\n  ]);\n}\n","import { createGlobalStyle } from 'styled-components';\n\nexport const GlobalStyle = createGlobalStyle`\n  body, main, section {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n  input {\n    font-family: Helvetica, Arial, sans-serif;\n  }\n`;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { enableAllPlugins } from 'immer';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport Core from 'components/Core/Core';\nimport createStore from 'state/store';\n\nimport { GlobalStyle } from 'styles/Global';\n\nenableAllPlugins();\nconst store = createStore();\nconst rootAppNode = document.body.firstElementChild;\n\nif (rootAppNode) {\n  ReactDOM.render(\n    <Provider store={store}>\n      <BrowserRouter>\n        <GlobalStyle />\n        <Core />\n      </BrowserRouter>\n    </Provider>,\n    rootAppNode\n  );\n}\n","import { createStore, applyMiddleware, Store, CombinedState } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport dataInit from 'data';\nimport { trackAuthChange } from 'data/auth';\nimport rootReducer from 'state/reducers';\nimport rootSaga from 'state/sagas';\nimport { authFetch, authOut, authSuccess } from 'state/actions/user';\n\nimport { Actions, AuthSuccess } from 'types/actions';\nimport { State } from 'types/state';\n\nimport { analytics } from 'utils/analytics';\n// import { loadState, saveState } from './localStorage';\n\nexport default (): Store<CombinedState<State>, Actions> => {\n  // Global initialization of the Firebase\n  dataInit(analytics.saveAnalyticsState);\n\n  // const persistedState = loadState();\n  const sagaMiddleware = createSagaMiddleware();\n  const middleware = applyMiddleware(sagaMiddleware);\n  const composedMiddleware = composeWithDevTools({ trace: true, traceLimit: 25 })(middleware);\n\n  const store = createStore(rootReducer, composedMiddleware);\n  sagaMiddleware.run(rootSaga);\n\n  // Starting authorization and provinging two callbacks for succesful & failed fetching auth data\n  trackAuthChange({\n    fetching: () => store.dispatch(authFetch()),\n    success: (userData: AuthSuccess['payload']) => store.dispatch(authSuccess(userData)),\n    out: () => store.dispatch(authOut()),\n  });\n\n  // const store = createStore(rootReducer, persistedState, composedMiddleware);\n  // store.subscribe(() => {\n  //   const { selection, ...stateRest } = store.getState();\n  //   saveState(stateRest);\n  // });\n\n  return store;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkroadmap\"] = self[\"webpackChunkroadmap\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [559,365], () => (__webpack_require__(5221)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}